(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{142:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(0),o=n(30),a=n(4),s=n(65),p=n(441),u=n(238),l=n(245),c=n(243),g=n(449),d=y=r.__decorate([i.NgModule({imports:[a.CommonModule,s.NgbModule,o.FormsModule,u.GameSetupModule,p.DemoViewRouteModule,g.RungViewerAppModule],declarations:[l.DemoViewComponent,c.DemoStartViewComponent]})],y);function y(){}t.DemoViewModule=d},236:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(29),o=n(0),a=n(24),s=n(23),p=n(123),u=n(244),l=n(231),c=n(138),g=n(442),d=n(90),y=(f.prototype.isInitialized=function(){return this.initialized},f.prototype.setInitialize=function(e){this.initialized=e},f.prototype.setStarting=function(e){this.starting=e},f.prototype.isStarting=function(){return this.starting},f.prototype.initializeByRungs=function(e,t){var n=this;return this.rungLegData=new c.RungLegData,this.rungLegData.rung=new c.Rung,this.rungLegData.rung.rungNodes=t,this.rungLegData.legs=e,a.of(void 0).pipe(s.finalize(function(){n.setInitialize(!0),n.setPlaying(!1)}))},f.prototype.getData=function(e){var t=this;return this.setInitialize(!1),this.setError(void 0),this.setRungLegData(void 0),this.contentRungModelService.getRungLegsDataByHashKey(e).pipe(s.catchError(function(e){return t.setError(e),a.throwError(e)}),s.tap(function(e){t.setRungLegData(e)}),s.finalize(function(){t.setInitialize(!0),t.setPlaying(t.isCompleted()||t.isStarted())}))},f.prototype.getRungLegData=function(){return this.rungLegData},f.prototype.setRungLegData=function(e){this.rungLegData=e},f.prototype.hasRungLegData=function(){return!i.isUndefined(this.rungLegData)},f.prototype.getRung=function(){return i.get(this.getRungLegData(),"rung")},f.prototype.getRungId=function(){return i.get(this.getRung(),"rungId")},f.prototype.getRungNodes=function(){return i.get(this.getRung(),"rungNodes")},f.prototype.getLegs=function(){return i.get(this.getRungLegData(),"legs",[])},f.prototype.getError=function(){return this.error},f.prototype.setError=function(e){this.error=new d.HttpErrorResponseState(e)},f.prototype.hasError=function(){return!i.isUndefined(this.error)},f.prototype.isEmpty=function(){return this.hasError()&&this.getError().isErrorNotFound()},f.prototype.isUnvailable=function(){return this.hasError()&&this.getError().isError5xx()},f.prototype.isStarted=function(){return i.get(this.getRung(),"completed")!=g.STATUS_TRUE&&i.get(this.getRung(),"started")==g.STATUS_TRUE},f.prototype.play=function(e,t){return this.rungGeneratorService.play(),a.of(void 0)},f.prototype.setPlaying=function(e){this.playing=e},f.prototype.isPlaying=function(){return this.playing},f.prototype.setCompleted=function(e){this.completed=e},f.prototype.isCompleted=function(){return this.completed},f.prototype.getErrorStatus=function(){return i.get(this.getError(),"status")},f=r.__decorate([o.Injectable(),r.__metadata("design:paramtypes",[p.ContentRungModelService,u.ProgressRungModelService,l.RungGeneratorService])],f));function f(e,t,n){this.contentRungModelService=e,this.progressRungModelService=t,this.rungGeneratorService=n,this.initialized=!1,this.starting=!1,this.playing=!1,this.completed=!1}t.RungViewerAppService=y},243:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(0),o=n(230),a=n(57),s=n(236),p=n(65),u=(l.prototype.ngOnInit=function(){this.hasLegs()||this.router.navigate(["/play"])},l.prototype.getLegs=function(){return this.gameSetupService.getLegs()},l.prototype.hasLegs=function(){return this.gameSetupService.hasLegs()},l.prototype.getRungContainers=function(){return this.gameSetupService.getGeneratedRungs()},l.prototype.back=function(){this.rungViewerAppService.isCompleted()?this.exit():this.rungViewerAppService.isPlaying()?this.modalService.open(this.confirmExitContent,{centered:!0}):this.router.navigate(["/play"])},l.prototype.exit=function(){(this.rungViewerAppService.isPlaying()||this.rungViewerAppService.isCompleted())&&this.gameSetupService.reset(),this.router.navigate(["/play"])},l.prototype.completed=function(){},r.__decorate([i.ViewChild("confirmExitContent",{static:!1}),r.__metadata("design:type",p.NgbModal)],l.prototype,"confirmExitContent",void 0),l=r.__decorate([i.Component({selector:"app-demo-start-view",template:n(443),styles:[n(444)]}),r.__metadata("design:paramtypes",[o.GameSetupService,s.RungViewerAppService,p.NgbModal,a.Router,a.ActivatedRoute])],l));function l(e,t,n,r,i){this.gameSetupService=e,this.rungViewerAppService=t,this.modalService=n,this.router=r,this.route=i,this.played=!1}t.DemoStartViewComponent=u},244:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(0),o=n(66),a=(s.prototype.postStarted=function(e,t){return this.connectionFactoryService.service("progress").setPath("rung/"+e+"/start").post({},t)},s.prototype.postCompleted=function(e,t){return this.connectionFactoryService.service("progress").setPath("rung/"+e+"/complete").post({},t)},s=r.__decorate([i.Injectable({providedIn:"root"}),r.__metadata("design:paramtypes",[o.ConnectionFactoryService])],s));function s(e){this.connectionFactoryService=e}t.ProgressRungModelService=a;function p(){}t.PostProgressRung=p},245:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(0),o=n(230),a=n(57),s=(p.prototype.ngOnInit=function(){},p.prototype.isPlayed=function(){return this.played},p.prototype.onSaved=function(){this.router.navigate(["/play/start"])},p=r.__decorate([i.Component({selector:"app-demo-view",template:n(446),styles:[n(447)]}),r.__metadata("design:paramtypes",[o.GameSetupService,a.Router,a.ActivatedRoute])],p));function p(e,t,n){this.gameSetupService=e,this.router=t,this.route=n,this.played=!1}t.DemoViewComponent=s},441:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(0),o=n(57),a=n(243),s=[{path:"",component:n(245).DemoViewComponent},{path:"start",component:a.DemoStartViewComponent}],p=u=r.__decorate([i.NgModule({imports:[o.RouterModule.forChild(s)]})],u);function u(){}t.DemoViewRouteModule=p},442:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.STATUS_TRUE=1,t.STATUS_FALSE=0},443:function(e,t){e.exports='<div class="h-100 d-flex justify-content-center align-items-center demo-start">\r\n    <app-rung-viewer-app\r\n        [legs]="getLegs()"\r\n        [rungs]="getRungContainers()"\r\n        (onBack)="back()"\r\n        (onCompleted)="completed()"\r\n    ></app-rung-viewer-app>\r\n</div>\r\n\r\n<ng-template #confirmExitContent let-modal>\r\n    <div class="modal-header">\r\n        <h4 class="modal-title" id="modal-basic-title">Are you sure?</h4>\r\n        <i (click)="modal.dismiss(\'Cross click\')" class="far fa-times"></i>\r\n    </div>\r\n    <div class="modal-bodypt-0 p-2">\r\n        <div class="mb-2 py-2 text-center">\r\n            Are you sure you want to exit the game?\r\n        </div>\r\n    </div>\r\n    <div class="modal-footer">\r\n        <button (click)="exit(); modal.dismiss()" class="btn border px-3 mx-1">\r\n            Ok\r\n        </button>\r\n        <button (click)="modal.dismiss()" class="btn border mx-1">\r\n            Cancel\r\n        </button>\r\n    </div>\r\n</ng-template>\r\n'},444:function(e,t,n){var r=n(445);e.exports="string"==typeof r?r:r.toString()},445:function(e,t,n){(t=n(56)(!1)).push([e.i,".demo-start{background-image:linear-gradient(45deg, #f3f5f2 1.67%, #ffffff 1.67%, #ffffff 50%, #f3f5f2 50%, #f3f5f2 51.67%, #ffffff 51.67%, #ffffff 100%);background-size:42.43px 42.43px}",""]),e.exports=t},446:function(e,t){e.exports='<div class="container h-100">\r\n    <div class="row h-100">\r\n        <div class="pt-3 col-sm-12 mt-2 pb-5 mb-5">\r\n            <app-game-setup (onSaved)="onSaved()"></app-game-setup>\r\n        </div>\r\n    </div>\r\n</div>\r\n'},447:function(e,t,n){var r=n(448);e.exports="string"==typeof r?r:r.toString()},448:function(e,t,n){(t=n(56)(!1)).push([e.i,"",""]),e.exports=t},449:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(0),o=n(30),a=n(57),s=n(65),p=n(4),u=n(235),l=n(140),c=n(450),g=n(91),d=n(456),y=n(236),f=m=r.__decorate([i.NgModule({imports:[s.NgbModule,o.FormsModule,p.CommonModule,a.RouterModule,u.RungGeneratorModule,g.LoadingModule,l.TokenListViewerModule,c.BuyWallModule],declarations:[d.RungViewerAppComponent],exports:[d.RungViewerAppComponent],providers:[y.RungViewerAppService]})],m);function m(){}t.RungViewerAppModule=f},450:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(0),o=n(30),a=n(4),s=n(65),p=n(451),u=n(455),l=c=r.__decorate([i.NgModule({imports:[s.NgbModule,o.FormsModule,a.CommonModule],declarations:[p.BuyWallComponent],exports:[p.BuyWallComponent],providers:[u.BuyWallService]})],c);function c(){}t.BuyWallModule=l},451:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(0),o=n(57),a=n(65),s=(p.prototype.buyToken=function(){this.router.navigate(["/purchase"]),this.modalService.dismissAll()},p=r.__decorate([i.Component({selector:"app-buy-wall",template:n(452),styles:[n(453)]}),r.__metadata("design:paramtypes",[o.Router,a.NgbModal])],p));function p(e,t){this.router=e,this.modalService=t}t.BuyWallComponent=s},452:function(e,t){e.exports='<div class="text-center">\r\n    <p>Sorry, you don\'t have tokens anymore.</p>\r\n    <span (click)="buyToken()" class="btn btn-app btn-danger text-white">Buy token?</span>\r\n</div>'},453:function(e,t,n){var r=n(454);e.exports="string"==typeof r?r:r.toString()},454:function(e,t,n){(t=n(56)(!1)).push([e.i,"",""]),e.exports=t},455:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(0),o=a=r.__decorate([i.Injectable(),r.__metadata("design:paramtypes",[])],a);function a(){}t.BuyWallService=o},456:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);n(457);var i=n(29),s=n(0),o=n(57),a=n(65),p=n(123),u=n(115),l=n(244),c=n(236),g=n(23),d=n(231),y=(f.prototype.ngOnInit=function(){this.initialize()},f.prototype.ngOnDestroy=function(){this.rungViewerAppService.setPlaying(!1),this.rungViewerAppService.setCompleted(!1)},f.prototype.initialize=function(){var e=this;this.legs&&this.rungs?this.rungViewerAppService.initializeByRungs(this.legs,this.rungs).pipe(g.finalize(function(){e.setInitialized(!0)})).subscribe():this.rungViewerAppService.getData(this.getHashKey()).pipe(g.finalize(function(){e.setInitialized(!0)})).subscribe()},f.prototype.setInitialized=function(e){this.initialized=e},f.prototype.isInitialized=function(){return this.initialized},f.prototype.isStarting=function(){return this.rungViewerAppService.isStarting()},f.prototype.hasRungLegData=function(){return this.rungViewerAppService.hasRungLegData()},f.prototype.isEmpty=function(){return this.rungViewerAppService.isEmpty()},f.prototype.isUnvailable=function(){return this.rungViewerAppService.isUnvailable()},f.prototype.getRungLegData=function(){return this.rungViewerAppService.getRungLegData()},f.prototype.getRung=function(){return this.rungViewerAppService.getRung()},f.prototype.getRungId=function(){return this.rungViewerAppService.getRungId()},f.prototype.getRungNodes=function(){return this.rungViewerAppService.getRungNodes()},f.prototype.getLegs=function(){return this.rungViewerAppService.getLegs()},f.prototype.isStarted=function(){return this.rungViewerAppService.isStarted()},f.prototype.isCompleted=function(){return this.rungViewerAppService.isCompleted()},f.prototype.getHashKey=function(){return this.hashKey},f.prototype.getAccountId=function(){return this.accountId},f.prototype.shouldShowRung=function(){return this.showRung},f.prototype.hasAccountId=function(){return!i.isUndefined(this.accountId)},f.prototype.isPlaying=function(){return this.rungViewerAppService.isPlaying()},f.prototype.goBack=function(){this.onBack.emit(void 0)},f.prototype.openResult=function(){this.modalService.open(this.gameResultContent),alert(123123)},f.prototype.openTokenListViewer=function(){this.modalService.open(this.tokenListViewerContent,{centered:!0})},f.prototype.openBuyWall=function(){this.modalService.open(this.buyWallContent,{centered:!0,size:"xs"})},f.prototype.onSelectToken=function(e){this.currentToken=e},f.prototype.getCurrentToken=function(){return this.currentToken},f.prototype.getCurrentTokenId=function(){return i.get(this.getCurrentToken(),"tokenId")},f.prototype.completed=function(){this.onCompleted.emit(),this.rungViewerAppService.setPlaying(!1),this.rungViewerAppService.setCompleted(!0)},f.prototype.onPlay=function(){this.play()},f.prototype.play=function(){this.rungGeneratorService.play(),this.rungViewerAppService.setPlaying(!0),this.rungViewerAppService.setCompleted(!1)},r.__decorate([s.ViewChild("tokenListViewerContent",{static:!1}),s.ViewChild("gameResultContent",{static:!1}),s.ViewChild("buyWallContent",{static:!1}),r.__metadata("design:type",a.NgbModal)],f.prototype,"buyWallContent",void 0),r.__decorate([s.Input(),r.__metadata("design:type",Number)],f.prototype,"rungId",void 0),r.__decorate([s.Input(),r.__metadata("design:type",String)],f.prototype,"hashKey",void 0),r.__decorate([s.Input(),r.__metadata("design:type",Number)],f.prototype,"accountId",void 0),r.__decorate([s.Input(),r.__metadata("design:type",Array)],f.prototype,"legs",void 0),r.__decorate([s.Input(),r.__metadata("design:type",Array)],f.prototype,"rungs",void 0),r.__decorate([s.Output(),r.__metadata("design:type",Object)],f.prototype,"onBack",void 0),r.__decorate([s.Output(),r.__metadata("design:type",s.EventEmitter)],f.prototype,"onCompleted",void 0),f=r.__decorate([s.Component({selector:"app-rung-viewer-app",template:n(458),styles:[n(459)]}),r.__metadata("design:paramtypes",[c.RungViewerAppService,l.ProgressRungModelService,p.ContentRungModelService,u.ContentTokenStateService,d.RungGeneratorService,o.Router,a.NgbModal])],f));function f(e,t,n,r,i,o,a){this.rungViewerAppService=e,this.progressRungModelService=t,this.contentRungModelService=n,this.contentTokenStateService=r,this.rungGeneratorService=i,this.router=o,this.modalService=a,this.legs=[],this.onBack=new s.EventEmitter,this.onCompleted=new s.EventEmitter,this.showRung=!0,this.initialized=!1}t.RungViewerAppComponent=y},457:function(e,t,n){},458:function(e,t){e.exports='<div\r\n    *ngIf="!isPlaying() && !isCompleted()"\r\n    class="play-overlay d-flex justify-content-center align-items-center"\r\n>\r\n    <div class="play-overlay-bg"></div>\r\n    <i (click)="play()" class="fas fa-play-circle btn-play"></i>\r\n</div>\r\n<div\r\n    [class.menu-prominent]="!isPlaying() && !isCompleted()"\r\n    class="play-menu text-center d-flex justify-content-center flex-row"\r\n>\r\n    <span (click)="goBack()" class="go-back-button rounded-circle mr-2">\r\n        <i class="fas fa-arrow-alt-circle-left"></i>\r\n    </span>\r\n    <span\r\n        *ngIf="false"\r\n        class="icon-wrapper rounded-circle d-flex justify-content-center"\r\n        [ngbPopover]="playMenuContent"\r\n        [popoverClass]="\'play-menu-tooltip\'"\r\n        placement="right"\r\n        container="body"\r\n    >\r\n        <i class="fa fa-ellipsis-v"></i>\r\n    </span>\r\n</div>\r\n\r\n<div class="d-flex flex-column justify-contdent-center h-100 w-100 pt-3">\r\n    <ng-template [ngIf]="isInitialized() && hasRungLegData()">\r\n        <app-rung-generator\r\n            [showRung]="isPlaying() || isCompleted()"\r\n            [legs]="getLegs()"\r\n            [rungs]="getRungNodes()"\r\n            (onCompleted)="completed()"\r\n        ></app-rung-generator>\r\n    </ng-template>\r\n\r\n    <ng-template [ngIf]="isInitialized() && isEmpty()">\r\n        <div\r\n            class="d-flex flex-column justify-content-center align-items-center w-100 h-100"\r\n        >\r\n            <span class="mr-2">This game is no longer available.</span>\r\n            <ng-template [ngIf]="hasAccountId()">\r\n                <a routerLink="/play/list">Go back</a>\r\n            </ng-template>\r\n        </div>\r\n    </ng-template>\r\n\r\n    <ng-template [ngIf]="isInitialized() && isUnvailable()">\r\n        <div\r\n            class="d-flex flex-column justify-content-center align-items-center w-100 h-100"\r\n        >\r\n            <span>Failed to generate data. Please try again later.</span>\r\n        </div>\r\n    </ng-template>\r\n    <ng-container [ngTemplateOutlet]="loadingMessage"></ng-container>\r\n</div>\r\n\r\n<ng-template #gameResultContent>\r\n    <div class="modal-body bg-info pt-0 p-2">\r\n        <h4 class="text-center text-white">Game Results!</h4>\r\n        <ul class="list-group list-group-flush">\r\n            <li class="list-group-item">Cras justo odio</li>\r\n            <li class="list-group-item">Dapibus ac facilisis in</li>\r\n            <li class="list-group-item">Morbi leo risus</li>\r\n            <li class="list-group-item">Porta ac consectetur ac</li>\r\n            <li class="list-group-item">Vestibulum at eros</li>\r\n        </ul>\r\n    </div>\r\n    <div class="modal-footer">\r\n        <button class="btn btn-info btn-sm" (click)="gameResultModal.close()">\r\n            Close\r\n        </button>\r\n    </div>\r\n</ng-template>\r\n\r\n<ng-template #playMenuContent>\r\n    <div class="play-menu-content">\r\n        <span (click)="onPlay()" class="play-button rounded-circle p-2 mx-1">\r\n            <i class="fas fa-play"></i>\r\n        </span>\r\n        <ng-template [ngIf]="!isStarted()">\r\n            <span\r\n                routerLink="/setup/edit/{{ getHashKey() }}"\r\n                class="result-button rounded-circle p-2 mx-1"\r\n            >\r\n                <i class="fas fa-pen-square"></i>\r\n            </span>\r\n        </ng-template>\r\n        <ng-template [ngIf]="isCompleted()">\r\n            <span\r\n                (click)="openResult()"\r\n                class="result-button rounded-circle p-2 mx-1"\r\n            >\r\n                <i class="fas fa-table"></i>\r\n            </span>\r\n        </ng-template>\r\n    </div>\r\n</ng-template>\r\n\r\n<ng-template #tokenListViewerContent>\r\n    <div class="modal-header py-3 border-0 token-list-viewer-header">\r\n        <h5 class="mb-0 py-0">Select token you want to use:</h5>\r\n    </div>\r\n    <div class="modal-body px-1">\r\n        <div class="p-1 mb-2 mx-2 p-2 play-note">\r\n            <span class="font-weight-bold">Note:</span> Once you click the Play\r\n            button, you cannot not be able to edit this game anymore.\r\n        </div>\r\n        <app-token-list-viewer\r\n            [accountId]="getAccountId()"\r\n            [showSelector]="true"\r\n            (onSelect)="onSelectToken($event)"\r\n        ></app-token-list-viewer>\r\n    </div>\r\n    <div class="modal-footer d-flex justify-content-center">\r\n        <button (click)="play()" class="btn btn-app btn-play font-weight-bold">\r\n            <i class="fas fa-play"></i> Play\r\n        </button>\r\n    </div>\r\n</ng-template>\r\n\r\n<ng-template #buyWallContent>\r\n    <div class="modal-body pt-5 pb-4">\r\n        <app-buy-wall></app-buy-wall>\r\n    </div>\r\n</ng-template>\r\n\r\n<ng-template #loadingMessage>\r\n    <app-loading\r\n        *ngIf="!isInitialized()"\r\n        [text]="\'Building ladder..\'"\r\n        [type]="\'overlay\'"\r\n        [size]="\'lg\'"\r\n    ></app-loading>\r\n    <app-loading\r\n        *ngIf="isStarting()"\r\n        [text]="\'Starting game..\'"\r\n        [type]="\'overlay\'"\r\n        [size]="\'lg\'"\r\n    ></app-loading>\r\n</ng-template>\r\n'},459:function(e,t,n){var r=n(460);e.exports="string"==typeof r?r:r.toString()},460:function(e,t,n){(t=n(56)(!1)).push([e.i,".play-menu{position:absolute;left:.3em;top:.7em;width:2.4em;padding:0em;z-index:2}.play-menu .icon-wrapper{cursor:pointer}.play-menu .icon-wrapper i{font-size:1.2em}.play-menu .play-wrapper{box-shadow:0 0 1px 1px rgba(20,23,28,.1),0 3px 1px 0 rgba(20,23,28,.1)}.play-menu .go-back-button{cursor:pointer;display:flex;justify-content:center}.play-menu .go-back-button i{font-size:1.2em}.play-menu.menu-prominent{z-index:99999}.play-menu.menu-prominent .go-back-button{color:#fff}.play-note{border:dashed 1px #ddd;font-size:.8em}.btn-play{color:#505763}.token-list-viewer-header{box-shadow:0 0 1px 1px rgba(20,23,28,.1),0 3px 1px 0 rgba(20,23,28,.1)}.play-overlay{position:absolute;left:0;top:0;z-index:999;width:100%;height:100%}.play-overlay .btn-play{font-size:6em;color:#fff;position:absolute;z-index:8;cursor:pointer}.play-overlay .play-overlay-bg{position:absolute;height:100%;width:100%;background-color:#000;opacity:.6}",""]),e.exports=t}}]);