(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{114:function(t,p,e){"use strict";Object.defineProperty(p,"__esModule",{value:!0});var n,r=e(1),o=e(711),i=e(0),l=e(52),a=e(192),d=e(308),h=e(45),g=e(44),s=((n=c).prototype.service=function(t){var e=o.SERVICE_URL[t];return new u(this.http,e,this.getAuthorizationAccessToken())},c.prototype.getAuthorizationAccessToken=function(){return this.cookieService.get(n.ACCESS_TOKEN_KEY)},c.ACCESS_TOKEN_KEY="accessToken",c.CACHE_LIFETIME={content:864e5,identity:864e5},c=n=r.__decorate([i.Injectable({providedIn:"root"}),r.__metadata("design:paramtypes",[d.HttpClient,a.CookieService])],c));function c(t,e){this.http=t,this.cookieService=e}p.ConnectionFactoryService=s,p.METHOD_GET="GET",p.METHOD_POST="POST",p.METHOD_PUT="PUT",p.METHOD_DELETE="DELETE";var u=(f.prototype.setPath=function(t){return this.path=t,this},f.prototype.getServiceUrl=function(){return this.baseServiceUrl+"/"+this.path},f.prototype.get=function(t,e,n,r,o){return this.request(p.METHOD_GET,this.getServiceUrl(),t,e,r,o)},f.prototype.post=function(t,e,n,r,o){return this.request(p.METHOD_POST,this.getServiceUrl(),t,e,r,o)},f.prototype.put=function(t,e,n,r,o){return this.request(p.METHOD_PUT,this.getServiceUrl(),t,e,r,o)},f.prototype.delete=function(t,e,n,r,o){return this.request(p.METHOD_DELETE,this.getServiceUrl(),t,e,r,o)},f.prototype.getAuthorizationAccessToken=function(){return this.authorizationAccessToken},f.prototype.hasAuthorizationtAccessToken=function(){return!l.isEmpty(this.authorizationAccessToken)},f.prototype.request=function(t,e,n,r,o,i){var a,s=this,c=new d.HttpHeaders;this.hasAuthorizationtAccessToken()&&(c=c.append("Authorization","Bearer "+this.getAuthorizationAccessToken()));var u=l.assign({params:n,headers:c},i);switch(t){case p.METHOD_GET:a=this.http.get(e,u);break;case p.METHOD_POST:a=this.http.post(e,r,u);break;case p.METHOD_PUT:a=this.http.put(e,r,u);break;case p.METHOD_DELETE:a=this.http.delete(e,u);break;default:return h.throwError("Invalid HTTP Verb")}return a.pipe(g.catchError(function(t){return s.handleError(t)}))},f.prototype.handleError=function(t){return h.throwError(t)},f);function f(t,e,n){this.http=t,this.baseServiceUrl=e,this.authorizationAccessToken=n,this.path=""}p.BaseConnection=u},143:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(1),i=n(52),a=n(0),s=n(45),c=n(44),u=n(192),p=n(114),l=n(254),d=n(253),h=n(213),g=n(255),f=n(247),v=((r=m).prototype.initialize=function(){var t=this;return this.getAccount().pipe(c.finalize(function(){t.publish(r.EVENT_IDENTITY_UPDATE,t.getIdentity())}))},m.prototype.getAccount=function(){var t=this;return this.cache.getCache({key:"getAccount"},function(){return t.getRawAccount()})},m.prototype.getRawAccount=function(){var e=this;return this.setInitialize(!1),this.identityAccountModelService.getAccount().pipe(c.finalize(function(){console.log("Identity checked done."),e.setInitialize(!0)}),c.catchError(function(t){return e.cookieService.delete(p.ConnectionFactoryService.ACCESS_TOKEN_KEY),s.of(void 0)}),c.map(function(t){if(t)return e.setAccount(t),t}))},m.prototype.setAccount=function(t){this.account=t},m.prototype.getIdentity=function(){return this.account},m.prototype.getAccountId=function(){return i.get(this.getIdentity(),"accountId")},m.prototype.getFirstName=function(){return i.get(this.getIdentity(),"firstName")},m.prototype.getLastName=function(){return i.get(this.getIdentity(),"lastName")},m.prototype.hasIdentity=function(){return!i.isUndefined(this.account)},m.prototype.isAnonymous=function(){return!this.hasIdentity()},m.prototype.setInitialize=function(t){this.initialized=t},m.prototype.isInitialized=function(){return this.initialized},m.prototype.setLogoutRedirect=function(t){this.logoutRedirect=t},m.prototype.setCms=function(t){this.cms=t},m.prototype.isCms=function(){return this.cms},m.prototype.getLogoutRedirect=function(){return this.logoutRedirect},m.prototype.logout=function(){var t=this;return this.account=void 0,this.contentRungModelService.deleteCache(),this.contentTokenStateService.reset(),this.identityAccountModelService.logout().pipe(c.map(function(t){return t}),c.finalize(function(){t.cookieService.delete("accessToken")}))},m.prototype.deleteCache=function(){this.cache.destroy()},m.prototype.getObservable=function(t){return this.emitter.getObservable(t)},m.prototype.publish=function(t,e){this.emitter.publish(t,e)},m.prototype.subscribe=function(t,e,n){return this.emitter.subscribe(t,e,n)},m.prototype.destroy=function(){this.emitter.destroy()},m.EVENT_IDENTITY_UPDATE="eventIdentityUpdate",m=r=o.__decorate([a.Injectable({providedIn:"root"}),o.__metadata("design:paramtypes",[p.ConnectionFactoryService,l.IdentityAccountModelService,h.ContentTokenStateService,d.ContentRungModelService,u.CookieService])],m));function m(t,e,n,r,o){this.ConnectionFactoryService=t,this.identityAccountModelService=e,this.contentTokenStateService=n,this.contentRungModelService=r,this.cookieService=o,this.cache=new f.MemoryCache,this.initialized=!1,this.cms=!1,this.emitter=new g.Emitter(g.Emitter.TYPE_REPLAY)}e.IdentityService=v},160:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(1),i=n(0),a=((r=s).prototype.isAuthTypeLogin=function(){return this.authType==r.AUTH_TYPE_LOGIN},s.prototype.isAuthTypeRegister=function(){return this.authType==r.AUTH_TYPE_REGISTER},s.prototype.setAuthType=function(t){this.authType=t},s.prototype.setAuthTypeRegister=function(){this.setAuthType(r.AUTH_TYPE_REGISTER)},s.prototype.setAuthTypeLogin=function(){this.setAuthType(r.AUTH_TYPE_LOGIN)},s.prototype.setLoading=function(t){this.loading=t},s.prototype.isLoading=function(){return this.loading},s.AUTH_TYPE_REGISTER="register",s.AUTH_TYPE_LOGIN="login",s=r=o.__decorate([i.Injectable(),o.__metadata("design:paramtypes",[])],s));function s(){this.authType=r.AUTH_TYPE_LOGIN,this.loading=!1}e.AuthenticationAppService=a},167:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(52),o=n(258),i=(a.prototype.getErrorInstance=function(){return this.error},a.prototype.getStatus=function(){return r.get(this.getErrorInstance(),"status")},a.prototype.isErrorNotFound=function(){return this.getStatus()==o.NOT_FOUND},a.prototype.isErrorMethodNotAllowed=function(){return this.getStatus()==o.METHOD_NOT_ALLOWED},a.prototype.isErrorForbidden=function(){return this.getStatus()==o.FORBIDDEN},a.prototype.isErrorUnauthorized=function(){return this.getStatus()==o.UNAUTHORIZED},a.prototype.isErrorInternalServer=function(){return this.getStatus()==o.INTERNAL_SERVER_ERROR},a.prototype.isError5xx=function(){return 500<=this.getStatus()},a.prototype.isError4xx=function(){return 400<=this.getStatus()&&!this.isError5xx()},a.prototype.getErrorList=function(){return r.get(this.getErrorInstance(),"error")},a);function a(t){this.error=t}e.HttpErrorResponseState=i},168:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=n(0),i=n(6),a=n(724),s=c=r.__decorate([o.NgModule({imports:[i.CommonModule],declarations:[a.LoadingComponent],exports:[a.LoadingComponent]})],c);function c(){}e.LoadingModule=s},212:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(1),s=n(45),i=n(247),a=n(712),c=n(310),u=n(715),p=n(44),l=(r=c.CacheAbstract,o.__extends(d,r),d.prototype.getObservableCache=function(t){return u.GlobalObservableCache.getCache(t,function(){return new i.MemoryCache})},d.prototype.getCache=function(r,o,i,t){var a=this;if(void 0===t&&(t=!1),t&&this.deleteCache(r),this.useMemoryCache)return this.memoryCache.getCache(r,o);var e=this.generateHash(r);return s.from(this.cache.getItem(e)).pipe(p.flatMap(function(t){if(t&&!a.isExpired(t))return s.of(t.data);if(!o)return s.of(void 0);var e=a.observableCache.getCachedValue(r);if(e)return e;var n=o().pipe(p.map(function(t){return a.setValue(r,t,i),a.observableCache.deleteCache(r),t}),p.share());return a.observableCache.setValue(r,n)||s.of(void 0)}))},d.prototype.isExpired=function(t){return!!t.expires&&t.expires<(new Date).getTime()},d.prototype.getCachePromise=function(t,e,n,r){return void 0===r&&(r=!1),this.getCache(t,e,n,r).toPromise()},d.prototype.setValue=function(t,e,n){if(this.useMemoryCache)return this.memoryCache.setValue(t,e);var r=this.generateHash(t);return this.cache.setItem(r,{data:e,expires:this.generateExpiration(n)}),e},d.prototype.deleteCache=function(t){if(this.useMemoryCache)return this.memoryCache.deleteCache(t);var e=this.generateHash(t);this.observableCache.deleteCache(t),this.cache.removeItem(e)},d.prototype.destroy=function(){if(this.useMemoryCache)return this.memoryCache.destroy();this.cache.clear()},d);function d(t){var e=r.call(this)||this;return e.memoryCache=new i.MemoryCache,e.useMemoryCache=!1,e.cache=new a.LocalForageGeneric(t),e.useMemoryCache=!e.cache.isSupported(),e.observableCache=e.getObservableCache(t),e}e.StorageCache=l},213:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(52),o=n(0),a=n(44),s=n(256),c=(u.prototype.initializeTokenList=function(t){var e=this;return this.tokens=void 0,this.setTokenListInitialize(!1),this.contentPurchaseTokenModelService.getTokenList(t).pipe(a.finalize(function(){e.setTokenListInitialize(!0)}),a.map(function(t){return e.tokens=t,e.tokenCount=e.extractTokenCount(t),t}))},u.prototype.initializeTokenListHistoryCount=function(t){var e=this;return this.setTokenListHistoryCountInitialize(!1),this.contentPurchaseTokenModelService.geTokenListHistoryCount(t).pipe(a.finalize(function(){e.setTokenListHistoryCountInitialize(!0)}),a.map(function(t){return e.tokenListHistoryCount=t}))},u.prototype.extractTokenCount=function(t){return i.reduce(t,function(t,e,n){var r=t.total+i.get(e,"quantity",0),o=t.used+i.get(e,"used",0);return t.total=r,t.used=r-o,t},new p)},u.prototype.reset=function(){this.tokens=[],this.tokenCount=void 0,this.tokenListHistoryCount=void 0,this.tokenListInitialized=!1,this.tokenListHistoryCountInitialized=!1,this.contentPurchaseTokenModelService.deleteCache()},u.prototype.getLatestToken=function(){return i.chain(this.getTokens()).filter(function(t){return 0<t.quantity}).head().value()},u.prototype.getLatestTokenId=function(){return i.get(this.getLatestToken(),"tokenId")},u.prototype.setTokenListInitialize=function(t){this.tokenListInitialized=t},u.prototype.isTokenListInitialized=function(){return this.tokenListInitialized},u.prototype.setTokenListHistoryCountInitialize=function(t){this.tokenListHistoryCountInitialized=t},u.prototype.isTokenListHistoryCountInitialized=function(){return this.tokenListHistoryCountInitialized},u.prototype.getTokenListHistoryCount=function(){return this.tokenListHistoryCount},u.prototype.getTokens=function(){return this.tokens},u.prototype.getTotalTokens=function(){return i.get(this.getTokenListHistoryCount(),"total",0)},u.prototype.getUsedTokens=function(){return i.get(this.getTokenListHistoryCount(),"used",0)},u.prototype.getTotalRemainingTokens=function(){return this.getTotalTokens()-this.getUsedTokens()},u.prototype.getTokenCount=function(){return this.tokenCount},u.prototype.hasAvailableTokens=function(){return 0<this.getTotalRemainingTokens()},u.prototype.hasToken=function(){return 0<this.getTotalTokens()},u=r.__decorate([o.Injectable({providedIn:"root"}),r.__metadata("design:paramtypes",[s.ContentPurchaseTokenModelService])],u));function u(t){this.contentPurchaseTokenModelService=t,this.tokenListInitialized=!1,this.tokenListHistoryCountInitialized=!1}e.ContentTokenStateService=c;var p=function(){this.total=0,this.used=0};e.TokenCount=p},247:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(1),i=n(52),a=n(45),s=n(310),c=n(44),u=(r=s.CacheAbstract,o.__extends(p,r),p.prototype.getCache=function(e,t){var n=this,r=this.getCachedValue(e);return i.isUndefined(r)?t?t().pipe(c.map(function(t){return n.setValue(e,t),t}),c.share()):a.of(void 0):a.of(r)},p.prototype.getCachePromise=function(t,e){return this.getCache(t,e).toPromise()},p.prototype.getCachedValue=function(t){var e=this.generateHash(t);return this.cacheExists(t,e)?this.cache[e]:void 0},p.prototype.cacheExists=function(t,e){var n=e||this.generateHash(t);return i.has(this.cache,n)},p.prototype.setValue=function(t,e){var n=this.generateHash(t);return this.cache[n]=e},p.prototype.deleteCache=function(t){var e=this.generateHash(t);this.cacheExists(t,e)&&delete this.cache[e]},p.prototype.toList=function(){return i.isEmpty(this.cache)?[]:i.reduce(this.cache,function(t,e){return e&&t.push(e),t},[])},p.prototype.getLength=function(){return i.size(this.cache)},p.prototype.destroy=function(){this.cache={}},p);function p(){var t=r.call(this)||this;return t.cache={},t}e.MemoryCache=u},248:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(1),i=n(52),a=n(44),s=n(0),c=n(192),u=n(114),p=n(311),l=n(312),d=n(313),h=((r=g).prototype.getAdapter=function(t){switch(t){case r.TYPE_EMAIL:return this.emailAuthenticationService;case r.TYPE_GOOGLE:return this.googleAuthenticationService;case r.TYPE_FACEBOOK:return this.facebookAuthenticationService;default:return this.emailAuthenticationService}},g.prototype.login=function(t,e){var n=this;return this.getAdapter(t).login(e).pipe(a.map(function(t){return n.cookieService.set(u.ConnectionFactoryService.ACCESS_TOKEN_KEY,i.get(t,u.ConnectionFactoryService.ACCESS_TOKEN_KEY)),t}))},g.prototype.register=function(t,e){return this.getAdapter(t).register(e)},g.TYPE_EMAIL="email",g.TYPE_GOOGLE="google",g.TYPE_FACEBOOK="facebook",g=r=o.__decorate([s.Injectable(),o.__metadata("design:paramtypes",[p.EmailAuthenticationService,l.GoogleAuthenticationService,d.FacebookAuthenticationService,c.CookieService])],g));function g(t,e,n,r){this.emailAuthenticationService=t,this.googleAuthenticationService=e,this.facebookAuthenticationService=n,this.cookieService=r}e.AuthenticationAdapterService=h},249:function(t,e,n){var r=n(731);t.exports="string"==typeof r?r:r.toString()},253:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),a=n(52),r=n(0),o=n(45),s=n(44),c=n(316),u=n(114),p=n(212),l=(d.prototype.getById=function(t,e,n){var r=this;void 0===e&&(e=!1),void 0===n&&(n=u.ConnectionFactoryService.CACHE_LIFETIME.content);var o={rungId:t};return this.rungByHashKeyCache.getCache(o,function(){return r.getRawById(t)},n,e)},d.prototype.getRawById=function(t){return this.connectionFactoryService.service("content").setPath("rung/"+t).get({})},d.prototype.getByHashKey=function(t,e,n){var r=this;void 0===e&&(e=!1),void 0===n&&(n=u.ConnectionFactoryService.CACHE_LIFETIME.content);var o={hashKey:t};return this.rungByHashKeyCache.getCache(o,function(){return r.getRawByHashKey(t)},n,e)},d.prototype.getRawByHashKey=function(t){return this.connectionFactoryService.service("content").setPath("rung/hash/"+t).get({})},d.prototype.getLegRungMatch=function(t,e,n){var r=this;void 0===e&&(e=!1),void 0===n&&(n=u.ConnectionFactoryService.CACHE_LIFETIME.content);var o={rungId:t};return this.rungLegRungMatchCache.getCache(o,function(){return r.getRawLegRungMatch(t)},n,e)},d.prototype.getRawLegRungMatch=function(t){return this.connectionFactoryService.service("content").setPath("rung/"+t+"/leg").get({})},d.prototype.getRungAccountList=function(t,e,n,r){var o=this;void 0===n&&(n=!1),void 0===r&&(r=u.ConnectionFactoryService.CACHE_LIFETIME.content);var i=a.assign({},{account:t,key:"rungAccountListCache"},e);return this.rungAccountCache.getCache(i,function(){return o.getRawRungAccountList(t,e)},r,n)},d.prototype.getRawRungAccountList=function(t,e){return this.connectionFactoryService.service("content").setPath("rung/account/"+t).get(e)},d.prototype.getRungAccountListCount=function(t,e,n,r){var o=this;void 0===n&&(n=!1),void 0===r&&(r=u.ConnectionFactoryService.CACHE_LIFETIME.content);var i=a.assign({},{account:t,key:"rungAccountListCountCache"},e);return this.rungAccountListCountCache.getCache(i,function(){return o.getRawRungAccountListCount(t,e)},r,n)},d.prototype.getRawRungAccountListCount=function(t,e){return this.connectionFactoryService.service("content").setPath("rung/account/"+t+"/count").get(e)},d.prototype.getRungLegsDataById=function(t){var e=this.getById(t),n=this.getLegRungMatch(t);return o.forkJoin([e,n]).pipe(s.map(function(t){var e=new c.RungLegData,n=i.__read(t,2),r=n[0],o=n[1];return e.rung=r,e.legs=o,e}))},d.prototype.getRungLegsDataByHashKey=function(t){var e=this,n=new c.RungLegData;return this.getByHashKey(t).pipe(s.flatMap(function(t){return n.rung=t,e.getLegRungMatch(t.rungId)}),s.map(function(t){return n.legs=t,n}))},d.prototype.deleteCache=function(){this.rungCache.destroy(),this.rungAccountCache.destroy(),this.rungAccountListCountCache.destroy(),this.rungLegRungMatchCache.destroy(),this.rungByHashKeyCache.destroy()},d=i.__decorate([r.Injectable({providedIn:"root"}),i.__metadata("design:paramtypes",[u.ConnectionFactoryService])],d));function d(t){this.connectionFactoryService=t,this.rungCache=new p.StorageCache("ContentRungModelService"),this.rungAccountCache=new p.StorageCache("ContentRungModelService"),this.rungAccountListCountCache=new p.StorageCache("ContentRungModelService"),this.rungLegRungMatchCache=new p.StorageCache("ContentRungModelService"),this.rungByHashKeyCache=new p.StorageCache("ContentRungModelService")}e.ContentRungModelService=l;function h(){}e.PostRungParams=h;function g(){}e.PostRungLegParams=g;function f(){}e.GetRungAccountParams=f;function v(){}e.GetRungAccountCountParams=v},254:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=n(0),i=n(212),a=n(114),s=n(716),c=(u.prototype.postAccount=function(t){return this.connectionFactoryService.service("identity").setPath("account").post(void 0,t)},u.prototype.putAccount=function(t,e){return this.connectionFactoryService.service("identity").setPath("account/"+t).put(void 0,e)},u.prototype.postAccountLogin=function(t){return this.connectionFactoryService.service("identity").setPath("account/login").post(void 0,t)},u.prototype.getAccount=function(){return this.connectionFactoryService.service("identity").setPath("account/me").get({})},u.prototype.getAccountList=function(t,e,n){var r=this;return void 0===e&&(e=!1),void 0===n&&(n=a.ConnectionFactoryService.CACHE_LIFETIME.content),this.accountListCache.getCache({key:"accountListCache"},function(){return r.getRawAccountList(t)},n,e)},u.prototype.getRawAccountList=function(t){return this.connectionFactoryService.service("identity").setPath("account").get(t)},u.prototype.putChangePassword=function(t,e){return this.connectionFactoryService.service("identity").setPath("account/changePassword/"+t).put(void 0,e)},u.prototype.logout=function(){return this.connectionFactoryService.service("identity").setPath("account/logout").post({})},u=r.__decorate([o.Injectable({providedIn:"root"}),r.__metadata("design:paramtypes",[a.ConnectionFactoryService])],u));function u(t){this.connectionFactoryService=t,this.accountListCache=new i.StorageCache("IdentityAccountModelService")}e.IdentityAccountModelService=c;function p(){}e.GetAccountList=p;var l,d=(l=s.Account,r.__extends(h,l),h);function h(){return null!==l&&l.apply(this,arguments)||this}e.PostAccount=d;var g,f=(g=s.Account,r.__extends(v,g),v);function v(){return null!==g&&g.apply(this,arguments)||this}e.PutAccount=f;var m,y=(m=d,r.__extends(_,m),_);function _(){return null!==m&&m.apply(this,arguments)||this}e.PostAccountLogin=y;function A(){}e.PutChangePassword=A},255:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(52),o=n(45),i=(a.prototype.publish=function(t,e){this.getObservable(t).next(e)},a.prototype.error=function(t,e){this.getObservable(t).error(e)},a.prototype.subscribe=function(t,e,n){return this.getObservable(t).subscribe(function(t){e(t)},function(t){n(t)})},a.prototype.getObservable=function(t){return this.observables[t]||(this.observables[t]=this.generateSubject()),this.observables[t]},a.prototype.generateSubject=function(){switch(this.type){case a.TYPE_BEHAVIOR:return new o.BehaviorSubject(void 0);case a.TYPE_REPLAY:return new o.ReplaySubject(this.replayLength);default:return new o.Subject}},a.prototype.destroy=function(){r.map(this.observables,function(t){t.unsubscribe()}),this.observables={}},a.TYPE_EMITTER="emitter",a.TYPE_REPLAY="replay",a.TYPE_BEHAVIOR="behavior",a);function a(t,e){void 0===t&&(t=a.TYPE_EMITTER),void 0===e&&(e=1),this.type=t,this.replayLength=e,this.observables={}}e.Emitter=i},256:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(52),o=n(0),a=n(114),s=n(212),c=(u.prototype.getTokenList=function(t,e,n){var r=this;return void 0===e&&(e=!1),void 0===n&&(n=a.ConnectionFactoryService.CACHE_LIFETIME.content),this.tokenListCache.getCache(t,function(){return r.getRawTokenList(t)},n,e)},u.prototype.getRawTokenList=function(t){return this.connectionFactoryService.service("content").setPath("purchase/token/list").get(t)},u.prototype.geTokenListHistoryCount=function(t,e,n){var r=this;void 0===e&&(e=!1),void 0===n&&(n=a.ConnectionFactoryService.CACHE_LIFETIME.content);var o=i.assign({},{key:"listHistoryCount"},t);return this.tokenListHistoryCountCache.getCache(o,function(){return r.getRawTokenListHistoryCount(t)},n,e)},u.prototype.getRawTokenListHistoryCount=function(t){return this.connectionFactoryService.service("content").setPath("purchase/token/list/history/count").get(t)},u.prototype.getTokenListHistory=function(t,e,n){var r=this;void 0===e&&(e=!1),void 0===n&&(n=a.ConnectionFactoryService.CACHE_LIFETIME.content);var o=i.assign({},{key:"listHistory"},t);return this.tokenListHistory.getCache(o,function(){return r.getRawTokenListHistory(t)},n,e)},u.prototype.getRawTokenListHistory=function(t){return this.connectionFactoryService.service("content").setPath("purchase/token/list/history").get(t)},u.prototype.deleteCache=function(){this.tokenListCache.destroy(),this.tokenListHistory.destroy(),this.tokenListHistoryCountCache.destroy()},u=r.__decorate([o.Injectable({providedIn:"root"}),r.__metadata("design:paramtypes",[a.ConnectionFactoryService])],u));function u(t){this.connectionFactoryService=t,this.tokenListCache=new s.StorageCache("ContentPurchaseTokenModelService"),this.tokenListHistory=new s.StorageCache("ContentPurchaseTokenModelService"),this.tokenListHistoryCountCache=new s.StorageCache("ContentPurchaseTokenModelService")}e.ContentPurchaseTokenModelService=c;function p(){}e.GetTokenListParams=p;var l,d=(l=p,r.__extends(h,l),h);function h(){return null!==l&&l.apply(this,arguments)||this}e.GetTokenListHistoryParams=d;var g,f=(g=p,r.__extends(v,g),v);function v(){return null!==g&&g.apply(this,arguments)||this}e.GetTokenListHistoryCountParams=f},257:function(t,e,n){"use strict";var r=this;Object.defineProperty(e,"__esModule",{value:!0});var o=n(53);e.validateFormFields=function(n){Object.keys(n.controls).forEach(function(t){var e=n.get(t);e instanceof o.FormControl?e.markAsTouched({onlySelf:!0}):e instanceof o.FormGroup&&r.validateFormFields(e)})}},307:function(t,e){function n(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}n.keys=function(){return[]},n.resolve=n,(t.exports=n).id=307},309:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=n(0),i=n(255),a=(s.prototype.setLoading=function(t){this.loading=t},s.prototype.isLoading=function(){return this.loading},s.prototype.publish=function(t,e){this.emitter.publish(t,e)},s.prototype.subscribe=function(t,e,n){return this.emitter.subscribe(t,e,n)},s.prototype.destroy=function(){this.emitter.destroy()},s=r.__decorate([o.Injectable(),r.__metadata("design:paramtypes",[])],s));function s(){this.emitter=new i.Emitter,this.loading=!0}e.AppService=a},310:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(52),o=(i.prototype.generateExpiration=function(t){if(t)return(new Date).getTime()+t},i.prototype.sortByKeys=function(e){if(!e)return{};var t=Object.keys(e),n=r.sortBy(t);return r.fromPairs(r.map(n,function(t){return[t,e[t]]}))},i.prototype.generateHash=function(t){return r.reduce(this.sortByKeys(t),function(t,e,n){return r.isUndefined(e)?t:t+"_"+n+"_"+e.toString()},"APP_")},i);function i(){}e.CacheAbstract=o},311:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=n(0),i=n(254),a=(s.prototype.login=function(t){return this.identityAccountModelService.postAccountLogin(t)},s.prototype.register=function(t){return this.identityAccountModelService.postAccount(t)},s=r.__decorate([o.Injectable(),r.__metadata("design:paramtypes",[i.IdentityAccountModelService])],s));function s(t){this.identityAccountModelService=t}e.EmailAuthenticationService=a},312:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=n(0),i=n(45),a=(s.prototype.login=function(t){return i.of(void 0)},s.prototype.register=function(t){return i.of(void 0)},s=r.__decorate([o.Injectable(),r.__metadata("design:paramtypes",[])],s));function s(){}e.GoogleAuthenticationService=a},313:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=n(0),i=n(45),a=(s.prototype.login=function(t){return i.of(void 0)},s.prototype.register=function(t){return i.of(void 0)},s=r.__decorate([o.Injectable(),r.__metadata("design:paramtypes",[])],s));function s(){}e.FacebookAuthenticationService=a},314:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=n(52),i=n(0),a=n(45),s=n(44),c=n(745),u=n(167),p=(l.prototype.reset=function(){this.installing=!1,this.error=void 0},l.prototype.setInstalling=function(t){this.installing=t},l.prototype.isInstalling=function(){return this.installing},l.prototype.setError=function(t){this.error=new u.HttpErrorResponseState(t)},l.prototype.getError=function(){return this.error},l.prototype.hasError=function(){return!o.isUndefined(this.error)},l.prototype.purchaseAccessCode=function(t){var e=this;return this.setInstalling(!0),this.error=void 0,this.contentPurchaseAccessCodeModelService.purchaseAccessCode(t).pipe(s.catchError(function(t){return e.setError(t),a.throwError(t)}),s.finalize(function(){e.setInstalling(!1)}))},l=r.__decorate([i.Injectable(),r.__metadata("design:paramtypes",[c.ContentPurchaseAccessCodeModelService])],l));function l(t){this.contentPurchaseAccessCodeModelService=t,this.installing=!1}e.TokenInstallerService=p},315:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=n(52),i=n(0),a=n(258),s=n(45),c=n(44),u=n(213),p=n(167),l=(d.prototype.initialize=function(t){var e=this;this.setInitalize(!1),this.setError(void 0);var n={accountId:t};return this.contentTokenStateService.initializeTokenList(n).pipe(c.finalize(function(){e.setInitalize(!0)}),c.catchError(function(t){return e.setError(t),s.throwError(t)}),c.map(function(t){return e.tokens=t}))},d.prototype.setError=function(t){this.error=new p.HttpErrorResponseState(t)},d.prototype.getError=function(){return this.error},d.prototype.isNotFoundError=function(){return o.get(this.getError(),"status")==a.NOT_FOUND},d.prototype.hasError=function(){return!o.isUndefined(this.error)},d.prototype.getTokens=function(){return this.tokens},d.prototype.hasTokens=function(){return!o.isUndefined(this.getTokens())},d.prototype.setInitalize=function(t){this.initialized=t},d.prototype.isInitialized=function(){return this.initialized},d.prototype.reset=function(){this.initialized=!1,this.tokens=[],this.error=void 0},d=r.__decorate([i.Injectable(),r.__metadata("design:paramtypes",[u.ContentTokenStateService])],d));function d(t){this.contentTokenStateService=t,this.initialized=!1}e.TokenListViewerService=l},316:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function r(){}e.Rung=r;function o(){}e.RungLegData=o},317:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.matchValueValidator=function(e,n){return function(t){return n.get(e).value==t.value?null:{matchValue:{value:t.value}}}}},318:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=n(0),i=n(53),a=n(6),s=n(113),c=n(168),u=n(749),p=n(315),l=d=r.__decorate([o.NgModule({imports:[s.NgbModule,i.FormsModule,a.CommonModule,c.LoadingModule],declarations:[u.TokenListViewerComponent],exports:[u.TokenListViewerComponent],providers:[p.TokenListViewerService]})],d);function d(){}e.TokenListViewerModule=l},706:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n(707),i=n(708);n(757).environment.production&&r.enableProdMode(),o.platformBrowserDynamic().bootstrapModule(i.AppModule).catch(function(t){return console.error(t)})},708:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=n(95),i=n(101),a=n(0),s=n(308),c=n(113),u=n(709),p=n(720),l=n(722),d=n(168),h=n(309),g=f=r.__decorate([a.NgModule({declarations:[u.AppComponent],imports:[o.BrowserModule,i.RouterModule,s.HttpClientModule,c.NgbModule,p.AppRouteModule,l.HeaderNavigationViewModule,d.LoadingModule],exports:[o.BrowserModule],providers:[h.AppService],bootstrap:[u.AppComponent]})],f);function f(){}e.AppModule=g},709:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=n(0),i=n(6),a=n(101),s=n(309),c=n(710),u=n(143),p=(l.prototype.ngOnInit=function(){this.initialize()},l.prototype.ngAfterViewInit=function(){},l.prototype.initialize=function(){this.identityService.setLogoutRedirect("/welcome")},l.prototype.open=function(){},l.prototype.isLoading=function(){return this.appService.isLoading()},l.prototype.setLoading=function(t){this.loading=t},l.prototype.onActivate=function(){console.log("ON ACTIVATE")},l.prototype.onDeactivate=function(){console.log("ON DEACTIVATE")},l.prototype.back=function(){this.location.back()},l.prototype.isHeaderVisible=function(){return!this.isPlayStartViewRoute()},l.prototype.isPlayRootViewRoute=function(){return c.isRoute(this.router.url,c.PLAY_ROOT_VIEW_ROUTE)},l.prototype.isPlayStartViewRoute=function(){return c.isRoute(this.router.url,c.PLAY_START_VIEW_ROUTE)},l=r.__decorate([o.Component({selector:"app-root",template:n(717),styles:[n(718)]}),r.__metadata("design:paramtypes",[i.Location,a.ActivatedRoute,a.Router,u.IdentityService,s.AppService])],l));function l(t,e,n,r,o){var i=this;this.location=t,this.route=e,this.router=n,this.identityService=r,this.appService=o,this.loading=!1,this.router.events.subscribe(function(t){t instanceof a.NavigationStart&&(i.appService.setLoading(!0),console.log("START NAVIGATION")),t instanceof a.NavigationEnd&&(i.currentRoute=t.url,i.appService.setLoading(!1),console.log("END NAVIGATION"))})}e.AppComponent=p},710:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(52);e.PLAY_ROOT_VIEW_ROUTE="play",e.PLAY_VIEW_ROUTE=e.PLAY_ROOT_VIEW_ROUTE+"/view",e.PLAY_START_VIEW_ROUTE=e.PLAY_ROOT_VIEW_ROUTE+"/start",e.isRoute=function(t,e){return r.includes(t,e)}},711:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SERVICE_URL={identity:"https://localapi.laddergame.com/api/identity",content:"https://localapi.laddergame.com/api/content",progress:"https://localapi.laddergame.com/api/progress"}},712:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(52),o=n(713),i=n(247),a=n(714),s=(c.prototype.getDriver=function(){return r.reduce(c.DRIVERS,function(t,e){return a.Browser.isSafari()&&e==o.WEBSQL||a.Browser.isSafari()&&e==o.INDEXEDDB||o.supports(e)&&t.push(e),t},[])},c.prototype.isSupported=function(){return o.supports(o.INDEXEDDB)||o.supports(o.WEBSQL)||o.supports(o.LOCALSTORAGE)},c.prototype.setItem=function(e,t){return!this.storage||this.useMemory?(this.memoryStorage.setValue({key:e},t),Promise.resolve(t)):this.storage.setItem(e,t).catch(function(t){return console.error("localForage setItem",e,t),Promise.reject(t)})},c.prototype.getItem=function(e){return!this.storage||this.useMemory?this.memoryStorage.getCachePromise({key:e}):this.storage.getItem(e).catch(function(t){return console.error("localForage getItem",e,t),Promise.reject(t)})},c.prototype.removeItem=function(e){return!this.storage||this.useMemory?(this.memoryStorage.deleteCache({key:e}),Promise.resolve()):this.storage.removeItem(e).catch(function(t){return console.error("localForage removeItem",e,t),Promise.reject(t)})},c.prototype.clear=function(){return!this.storage||this.useMemory?(this.memoryStorage.destroy(),Promise.resolve(void 0)):this.storage.clear().catch(function(t){console.error("localForage clear",t)})},c.prototype.length=function(){return!this.storage||this.useMemory?Promise.resolve(this.memoryStorage.getLength()):this.storage.length().catch(function(t){return console.error("localForage length",t),Promise.reject(void 0)})},c.DRIVERS=[o.INDEXEDDB,o.WEBSQL,o.LOCALSTORAGE],c);function c(t){this.useMemory=!1,this.memoryStorage=new i.MemoryCache;try{this.storage=o.createInstance({name:t}),this.getDriver().length?this.storage.setDriver(this.getDriver()):this.useMemory=!0}catch(t){console.error("localForage creation",t)}}e.LocalForageGeneric=s},714:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=(o.isOpera=function(){return!!window.opr&&!!window.opr.addons||!!window.opera||0<=navigator.userAgent.indexOf(" OPR/")},o.isFireFox=function(){var t=this.getUserAgent();return void 0!==window.InstallTrigger||/Firefox/i.test(t)||/FxiOS/i.test(t)},o.isSafari=function(){if(o.isChrome()||o.isFireFox()||o.isEdge())return!1;var t=navigator.userAgent;return/Safari/i.test(t)||o.checkSafari(window.safari?window.safari.pushNotification:"")},o.isSafari11=function(){return o.isSafari()&&"11"==o.getVersion()},o.isSafari10=function(){return o.isSafari()&&"10"==o.getVersion()},o.checkSafari=function(t){return"[object SafariRemoteNotification]"===t.toString()},o.isInternetExplorer=function(){return!!window.document.documentMode},o.isEdge=function(){var t=this.getUserAgent();return!o.isInternetExplorer()&&!!window.StyleMedia||/Edge/i.test(t)||/EdgiOS/i.test(t)||/EdgA/i.test(t)},o.isChrome=function(){var t=window.navigator;return!!window.chrome&&"Google Inc."===t.vendor&&!o.isOpera()&&!o.isEdge()||o.isIos()&&t.userAgent.match("CriOS")},o.isBlink=function(){return(o.isChrome()||o.isOpera())&&!!window.CSS},o.isIosMobileWebView=function(){var t=window.navigator.standalone||!1;return o.isIos()&&!t&&!o.isSafari()},o.isIos=function(){var t=navigator.userAgent;return/iPhone/i.test(t)||/iPad/i.test(t)||/iPod/i.test(t)},o.isChromeOs=function(){var t=navigator.userAgent;return/CrOS/i.test(t)},o.isMobile=function(){if(void 0!==o.mobileDevice)return o.mobileDevice;var t=navigator.userAgent;return o.mobileDevice=/Android/i.test(t)||/webOS/i.test(t)||/iPhone/i.test(t)||/iPad/i.test(t)||/iPod/i.test(t)||/BlackBerry/i.test(t)||/Windows Phone/i.test(t)||this.isIpad()},o.getDevice=function(){var t=navigator.userAgent;return/Android/i.test(t)?"Android":/webOS/i.test(t)?"webOS":/iPhone/i.test(t)?"iPhone":/iPad/i.test(t)?"iPad":/iPod/i.test(t)?"iPod":/BlackBerry/i.test(t)?"BlackBerry":/Windows Phone/i.test(t)?"Windows Phone":"Desktop"},o.isIpad=function(){var t=-1!==navigator.userAgent.toLowerCase().indexOf("ipad");return!!(!t&&navigator.userAgent.match(/Mac/)&&navigator.maxTouchPoints&&2<navigator.maxTouchPoints)||t},o.isIosDesktopView=function(){return!(!navigator.platform||!navigator.platform.match(/iPhone|iPod|iPad/))||"MacIntel"===navigator.platform&&1<navigator.maxTouchPoints},o.getVersion=function(){var t=navigator.userAgent,e=[];return o.isInternetExplorer()?(e=/\brv[ :]+(\d+)/g.exec(t)||[])&&e[1]||"":o.isOpera()?(e=t.match(/opera\/?\s*(\d+)/i))&&e[1]||"":(o.isChrome()&&(e=t.match(/(chrome(?=\/))\/?\s*(\d+)/i)),o.isFireFox()&&(e=t.match(/(firefox(?=\/))\/?\s*(\d+)/i)),o.isSafari()&&(e=t.match(/(version|safari(?=\/))\/?\s*(\d+)/i)),o.isEdge()&&(e=t.match(/(trident|edge(?=\/))\/?\s*(\d+)/i)),e&&e[2]||"")},o.getName=function(){return o.isChrome()?"Chrome":o.isFireFox()?"FireFox":o.isSafari()?"Safari":o.isEdge()?"Edge":o.isInternetExplorer()?"IE":o.isOpera()?"Opera":""},o.isAndroid=function(){var t=navigator.userAgent;return/Android/i.test(t)},o.inIframe=function(){try{return window.self!==window.top}catch(t){return!0}},o.appendScript=function(t,e,n){if(void 0===n&&(n=!0),!document.getElementById(t)){var r=document.createElement("script");r.id=t,r.src=e,r.async=n;var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(r,o)}},o.appendStyle=function(t,e){if(!document.getElementById(t)){var n=document.getElementsByTagName("head")[0],r=document.createElement("link");r.id=t,r.rel="stylesheet",r.type="text/css",r.href=e,r.media="all",n.appendChild(r)}},o.getIosVersion=function(){if(!o.isMobile()||!o.isIos())return"";var t=navigator.userAgent,e=t.indexOf("OS ");return-1<e?t.substr(e+3,3).replace("_","."):void 0},o.getAndroidVersion=function(){if(!o.isMobile()||!o.isAndroid())return"";var t=navigator.userAgent,e=t.indexOf("Android ");return-1<e?t.substr(e+8,3).replace("_","."):void 0},o.getUserAgent=function(){return navigator.userAgent},o.isAudioWorkletEnabled=function(){if(!window.OfflineAudioContext)return!1;var t=new OfflineAudioContext(1,1,44100);return Boolean(t.audioWorklet&&"function"==typeof t.audioWorklet.addModule)},o.getOSVersion=function(){if(/[\.\_\d]+/.exec(o.getUserAgent()))return/[\.\_\d]+/.exec(o.getUserAgent())[0]},o.getOSName=function(){var t=navigator.platform;return-1!=t.indexOf("Win")?"Windows":-1!=t.indexOf("Mac")?"MacOS":-1!=t.indexOf("X11")?"UNIX":-1!=t.indexOf("iPhone")?"iOS":-1!=t.indexOf("Android")?"Android":"Unknown OS"},o.isMac=function(){return-1!=navigator.appVersion.indexOf("Mac")},o.isLinux=function(){return-1!=navigator.appVersion.indexOf("Linux")},o.isUnix=function(){return-1!=navigator.appVersion.indexOf("X11")},o.isWindows=function(){return-1!=navigator.appVersion.indexOf("Win")},o.isWorkerEnabled=function(){return!!o.enableWorker&&void 0!==window.Worker},o.setWorkerEnabledFlag=function(t){o.enableWorker=t},o.enableWorker=!0,o);function o(){}e.Browser=r},715:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=(o.getCache=function(t,e){return window.observableCache||(window.observableCache={}),window.observableCache[t]||(window.observableCache[t]=e?e():void 0),window.observableCache[t]},o.removeCache=function(t){window.observableCache&&window.observableCache[t]&&(window.observableCache[t]=void 0)},o);function o(){}e.GlobalObservableCache=r},716:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function r(){}e.Account=r;function o(){}e.AuthenticationErrorResponse=o;function i(){}e.AccountLogin=i},717:function(t,e){t.exports='<app-header-navigation-view\r\n    [class.d-none]="!isHeaderVisible()"\r\n></app-header-navigation-view>\r\n<main role="main" [class.p-0]="!isHeaderVisible()">\r\n    <ng-template [ngIf]="isLoading()">\r\n        <div class="loading-wrapper">\r\n            <app-loading [type]="\'overlay\'" [size]="\'lg\'"></app-loading>\r\n        </div>\r\n    </ng-template>\r\n    <router-outlet></router-outlet>\r\n</main>\r\n'},718:function(t,e,n){var r=n(719);t.exports="string"==typeof r?r:r.toString()},719:function(t,e,n){(e=n(100)(!1)).push([t.i,"main{position:relative}.go-back{top:1.9em;left:.3em;width:1.2em;font-size:1.4em;cursor:pointer}.loading-wrapper{position:fixed;top:0;left:0;right:0;bottom:0;width:100%;height:100%;z-index:9}",""]),t.exports=e},720:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),o=r(95),i=r(0),a=r(101),s=[{path:"",canActivate:[r(721).InitializeGuardService],children:[{path:"",redirectTo:"about",pathMatch:"full"},{path:"about",loadChildren:function(){return new Promise(function(e,n){r.e(6).then(function(t){e(r(319).AboutViewModule)}.bind(null,r)).catch(function(t){n({loadChunkError:!0,details:t})})})}},{path:"welcome",loadChildren:function(){return new Promise(function(e,n){r.e(6).then(function(t){e(r(319).AboutViewModule)}.bind(null,r)).catch(function(t){n({loadChunkError:!0,details:t})})})}},{path:"setup",loadChildren:function(){return new Promise(function(e,n){Promise.all([r.e(1),r.e(0),r.e(4),r.e(7),r.e(29)]).then(function(t){e(r(758).SetupViewModule)}.bind(null,r)).catch(function(t){n({loadChunkError:!0,details:t})})})}},{path:"play",loadChildren:function(){return new Promise(function(e,n){Promise.all([r.e(1),r.e(0),r.e(4),r.e(5)]).then(function(t){e(r(320).DemoViewModule)}.bind(null,r)).catch(function(t){n({loadChunkError:!0,details:t})})})}},{path:"game",loadChildren:function(){return new Promise(function(e,n){Promise.all([r.e(0),r.e(27)]).then(function(t){e(r(759).GameViewModule)}.bind(null,r)).catch(function(t){n({loadChunkError:!0,details:t})})})}},{path:"friends",loadChildren:function(){return new Promise(function(e,n){r.e(26).then(function(t){e(r(760).ParticipantViewModule)}.bind(null,r)).catch(function(t){n({loadChunkError:!0,details:t})})})}},{path:"purchase",loadChildren:function(){return new Promise(function(e,n){r.e(28).then(function(t){e(r(761).PurchaseViewModule)}.bind(null,r)).catch(function(t){n({loadChunkError:!0,details:t})})})}},{path:"account",loadChildren:function(){return new Promise(function(e,n){Promise.all([r.e(2),r.e(17),r.e(7),r.e(25)]).then(function(t){e(r(762).AccountViewModule)}.bind(null,r)).catch(function(t){n({loadChunkError:!0,details:t})})})}},{path:"demo",loadChildren:function(){return new Promise(function(e,n){Promise.all([r.e(1),r.e(0),r.e(4),r.e(5)]).then(function(t){e(r(320).DemoViewModule)}.bind(null,r)).catch(function(t){n({loadChunkError:!0,details:t})})})}}]}],c=u=n.__decorate([i.NgModule({imports:[o.BrowserModule,a.RouterModule.forRoot(s)]})],u);function u(){}e.AppRouteModule=c},721:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=n(0),i=n(101),a=n(44),s=n(143),c=(u.prototype.canActivate=function(){return console.log("initializing guard."),this.identityService.initialize().pipe(a.map(function(){return!0}))},u=r.__decorate([o.Injectable({providedIn:"root"}),r.__metadata("design:paramtypes",[s.IdentityService,i.Router])],u));function u(t,e){this.identityService=t,this.router=e}e.InitializeGuardService=c},722:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=n(0),i=n(6),a=n(101),s=n(113),c=n(723),u=n(743),p=n(318),l=n(753),d=h=r.__decorate([o.NgModule({imports:[s.NgbModule,i.CommonModule,a.RouterModule,c.AuthenticationAppModule,u.TokenInstallerModule,p.TokenListViewerModule],declarations:[l.HeaderNavigationViewComponent],exports:[l.HeaderNavigationViewComponent],providers:[],bootstrap:[l.HeaderNavigationViewComponent]})],h);function h(){}e.HeaderNavigationViewModule=d},723:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=n(0),i=n(6),a=n(101),s=n(53),c=n(113),u=n(168),p=n(728),l=n(729),d=n(732),h=n(736),g=n(160),f=n(741),v=n(742),m=y=r.__decorate([o.NgModule({imports:[c.NgbModule,i.CommonModule,a.RouterModule,s.FormsModule,s.ReactiveFormsModule,p.AuthenticationAdapterModule,u.LoadingModule],declarations:[l.AuthenticationAppComponent,d.AuthenticationLoginAppComponent,h.AuthenticationRegisterAppComponent],exports:[l.AuthenticationAppComponent,d.AuthenticationLoginAppComponent,h.AuthenticationRegisterAppComponent],providers:[g.AuthenticationAppService,f.AuthenticationLoginAppService,v.AuthenticationRegisterAppService]})],y);function y(){}e.AuthenticationAppModule=m},724:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(1),i=n(0),a=((r=s).prototype.isTypeOverlay=function(){return this.getType()==r.LOADER_TYPE_OVERLAY},s.prototype.isTypeSimple=function(){return this.getType()==r.LOADER_TYPE_SIMPLE},s.prototype.getType=function(){return this.type},s.prototype.getText=function(){return this.text},s.prototype.getSize=function(){return this.size},s.prototype.getClassSize=function(){return"loader-"+this.getSize()},s.LOADER_TYPE_OVERLAY="overlay",s.LOADER_TYPE_SIMPLE="simple",o.__decorate([i.Input(),o.__metadata("design:type",String)],s.prototype,"type",void 0),o.__decorate([i.Input(),o.__metadata("design:type",String)],s.prototype,"size",void 0),o.__decorate([i.Input(),o.__metadata("design:type",String)],s.prototype,"text",void 0),s=r=o.__decorate([i.Component({selector:"app-loading",template:n(725),styles:[n(726)]}),o.__metadata("design:paramtypes",[])],s));function s(){this.type=r.LOADER_TYPE_SIMPLE,this.size="sm",this.text=""}e.LoadingComponent=a},725:function(t,e){t.exports='<ng-template [ngIf]="isTypeOverlay()">\r\n    <div class="loading-overlay-main" [ngClass]="getClassSize()">\r\n        <div class="loading-bg"></div>\r\n        <div\r\n            class="loading-content d-flex justify-content-center align-items-center flex-column"\r\n        >\r\n            <div\r\n                class="loader-border rounded-circle d-flex justify-content-center p-2"\r\n            >\r\n                <span\r\n                    class="spinner-border spinner-border-sm lg-spinner text-dark loader-lg"\r\n                ></span>\r\n            </div>\r\n            <span\r\n                *ngIf="getText()"\r\n                class="mt-2 bg-info text-white px-2 rounded"\r\n                >{{ getText() }}</span\r\n            >\r\n        </div>\r\n    </div>\r\n</ng-template>\r\n\r\n<ng-template [ngIf]="isTypeSimple()">\r\n    <div\r\n        [ngClass]="getClassSize()"\r\n        class="d-flex align-items-center flex-column w-100"\r\n    >\r\n        <div\r\n            class="loader-border rounded-circle d-flex justify-content-center p-2"\r\n        >\r\n            <span\r\n                class="spinner-border spinner-border-sm lg-spinner text-dark"\r\n            ></span>\r\n        </div>\r\n        <span *ngIf="getText()" class="mt-2 bg-info text-white px-2 rounded">{{\r\n            getText()\r\n        }}</span>\r\n    </div>\r\n</ng-template>\r\n'},726:function(t,e,n){var r=n(727);t.exports="string"==typeof r?r:r.toString()},727:function(t,e,n){(e=n(100)(!1)).push([t.i,".loading-overlay-main{position:absolute;height:100%;width:100%;top:0;z-index:9}.loading-bg{height:100%;width:100%;opacity:.5;background:#fff}.loading-content{position:absolute;top:0;height:100%;width:100%}.loader-border{box-shadow:0 0 1px 1px rgba(20,23,28,.1),0 3px 1px 0 rgba(20,23,28,.1);background-color:#fff}.loader-lg .loader-border{width:4em}.loader-lg .loader-border .spinner-border{width:3rem;height:3rem;font-size:2.5em}.loader-sm .loader-border{width:3em}.loader-sm .loader-border .spinner-border{width:2rem;height:2rem;font-size:2em}",""]),t.exports=e},728:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=n(0),i=n(6),a=n(101),s=n(248),c=n(311),u=n(312),p=n(313),l=d=r.__decorate([o.NgModule({imports:[i.CommonModule,a.RouterModule],providers:[s.AuthenticationAdapterService,c.EmailAuthenticationService,u.GoogleAuthenticationService,p.FacebookAuthenticationService]})],d);function d(){}e.AuthenticationAdapterModule=l},729:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=n(0),i=n(160),a=n(143),s=(c.prototype.ngOnInit=function(){this.setDefaultAuthType()},c.prototype.ngOnDestroy=function(){this.authenticationAppService.setAuthTypeLogin()},c.prototype.setDefaultAuthType=function(){this.getAuthType()&&this.authenticationAppService.setAuthType(this.getAuthType())},c.prototype.getAuthType=function(){return this.authType},c.prototype.isAuthTypeLogin=function(){return this.authenticationAppService.isAuthTypeLogin()},c.prototype.isAuthTypeRegister=function(){return this.authenticationAppService.isAuthTypeRegister()},c.prototype.authenticate=function(t){this.onAuthenticate.emit(t),t&&this.identityService.initialize()},c.prototype.shouldShowCallToAction=function(){return this.showCallToAction},r.__decorate([o.Input(),r.__metadata("design:type",String)],c.prototype,"authType",void 0),r.__decorate([o.Input(),r.__metadata("design:type",Boolean)],c.prototype,"showCallToAction",void 0),r.__decorate([o.Output(),r.__metadata("design:type",o.EventEmitter)],c.prototype,"onAuthenticate",void 0),c=r.__decorate([o.Component({selector:"app-authentication-app",template:n(730),styles:[n(249)]}),r.__metadata("design:paramtypes",[i.AuthenticationAppService,a.IdentityService])],c));function c(t,e){this.authenticationAppService=t,this.identityService=e,this.showCallToAction=!0,this.onAuthenticate=new o.EventEmitter}e.AuthenticationAppComponent=s},730:function(t,e){t.exports='<app-authentication-login-app\r\n    *ngIf="isAuthTypeLogin()"\r\n    [showCallToAction]="shouldShowCallToAction()" \r\n    (onAuthenticate)="authenticate($event)"></app-authentication-login-app>\r\n<app-authentication-register-app\r\n    *ngIf="isAuthTypeRegister()"\r\n    [showCallToAction]="shouldShowCallToAction()" \r\n    (onAuthenticate)="authenticate($event)"></app-authentication-register-app>'},731:function(t,e,n){(e=n(100)(!1)).push([t.i,"form{position:relative}.pick-color[readonly]{background:#fff;cursor:pointer}.input-errors{color:red;font-size:.85em;margin-top:.2em;padding:0}.loading-overlay{position:absolute;width:100%;height:100%}.loading-overlay-bg{background-color:#fff;position:absolute;width:100%;height:100%;opacity:.3}",""]),t.exports=e},732:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=n(52),i=n(0),a=n(53),s=n(44),c=n(192),u=n(160),p=n(248),l=n(257),d=n(167),h=(g.prototype.initializeForm=function(){this.currentForm=this.formBuilder.group({email:this.email,password:this.password}),this.currentForm.controls.email.setValidators([a.Validators.required,a.Validators.email]),this.currentForm.controls.password.setValidators([a.Validators.required])},g.prototype.onSubmit=function(){this.setError(void 0),this.currentForm.valid?this.login():l.validateFormFields(this.currentForm)},g.prototype.isLoading=function(){return this.authenticationAppService.isLoading()},g.prototype.login=function(){this.authenticationAppService.setLoading(!0),this.loginEmail()},g.prototype.loginEmail=function(){var e=this,t={email:this.email.value,password:this.password.value};this.authenticationAdapterService.login(p.AuthenticationAdapterService.TYPE_EMAIL,t).pipe(s.finalize(function(){e.authenticationAppService.setLoading(!1)})).subscribe(function(){e.onAuthenticate.emit(!0)},function(t){e.setError(t),e.onAuthenticate.emit(!1),console.log("LOGIN ERROR: ",t)})},g.prototype.setError=function(t){this.error=new d.HttpErrorResponseState(t)},g.prototype.hasError=function(){return!o.isUndefined(this.error)},g.prototype.getError=function(){return this.error},g.prototype.shouldShowCallToAction=function(){return this.showCallToAction},g.prototype.gotoRegister=function(){this.authenticationAppService.setAuthTypeRegister()},r.__decorate([i.Output(),r.__metadata("design:type",i.EventEmitter)],g.prototype,"onAuthenticate",void 0),r.__decorate([i.Input(),r.__metadata("design:type",Boolean)],g.prototype,"showCallToAction",void 0),g=r.__decorate([i.Component({selector:"app-authentication-login-app",template:n(733),styles:[n(249),n(734)]}),r.__metadata("design:paramtypes",[u.AuthenticationAppService,p.AuthenticationAdapterService,c.CookieService,a.FormBuilder])],g));function g(t,e,n,r){this.authenticationAppService=t,this.authenticationAdapterService=e,this.cookieService=n,this.formBuilder=r,this.onAuthenticate=new i.EventEmitter,this.showCallToAction=!0,this.email=new a.FormControl,this.password=new a.FormControl,this.credentialsInvalid=!1,this.initializeForm()}e.AuthenticationLoginAppComponent=h},733:function(t,e){t.exports='<h3 class="mb-3">Login</h3>\r\n<div *ngIf="hasError() && getError().isErrorNotFound()" class="alert alert-danger">\r\n    Invalid Email or Password.\r\n</div>\r\n<div *ngIf="hasError() && getError().isError5xx()" class="alert alert-danger">\r\n    Service unvailable at the moment. Please try again later.\r\n</div>\r\n<form [formGroup]="currentForm" (ngSubmit)="onSubmit()">\r\n    <app-loading *ngIf="isLoading()" [type]="\'overlay\'" [size]="\'sm\'"></app-loading>\r\n    <div class="form-group">\r\n        <input \r\n            tabindex="0"\r\n            type="text" \r\n            [formControl]="email" \r\n            [class.border-danger]="(email.hasError(\'required\') || email.hasError(\'email\')) && email.touched"\r\n            class="form-control rounded-0" \r\n            id="email" \r\n            name="email"\r\n            placeholder="Email">\r\n            <p *ngIf="email.invalid && email.touched" class="input-errors">\r\n                <span *ngIf="email.hasError(\'required\')">Email is required</span>\r\n                <span *ngIf="email.hasError(\'email\')">Your Email is invalid</span>\r\n            </p>\r\n    </div>\r\n    <div class="form-group">\r\n        <input \r\n            type="password" \r\n            [formControl]="password" \r\n            [class.border-danger]="password.hasError(\'required\') && password.touched"\r\n            class="form-control rounded-0" \r\n            id="password" \r\n            name="password"\r\n            placeholder="Password">\r\n            <p *ngIf="password.invalid && password.touched" class="input-errors">\r\n                <span *ngIf="password.hasError(\'required\')">Password is required</span>\r\n            </p>\r\n    </div>\r\n    <button type="submit" class="btn btn-app mb-2 w-100 rounded-0" [disabled]="isLoading()">Login</button>\r\n    <ng-template [ngIf]="shouldShowCallToAction()">\r\n        <div class="text-center">\r\n            <span class="mr-2">New to Laddergame?</span> <a [routerLink]="" (click)="gotoRegister()">Create an account</a>\r\n        </div>    \r\n    </ng-template>\r\n    \x3c!-- <div class="d-flex flex-column">\r\n        <p class="text-center py-0 my-1">or</p>\r\n        <div class="d-flex justify-content-center mb-2 py-1 w-100">\r\n            <button class="btn btn-danger mr-1 flex-fill">Google</button>\r\n            <button class="btn btn-info ml-1 py-0 flex-fill">Facebook</button>\r\n        </div>\r\n    </div> --\x3e\r\n</form>\r\n'},734:function(t,e,n){var r=n(735);t.exports="string"==typeof r?r:r.toString()},735:function(t,e,n){(e=n(100)(!1)).push([t.i,"",""]),t.exports=e},736:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=n(52),i=n(0),a=n(53),s=n(44),c=n(248),u=n(160),p=n(317),l=n(257),d=n(737),h=n(167),g=(f.prototype.initializeForm=function(){this.currentForm=this.formBuilder.group({firstName:this.firstName,lastName:this.lastName,email:this.email,password:this.password,passwordConfirm:this.passwordConfirm}),this.currentForm.controls.firstName.setValidators([a.Validators.required,a.Validators.minLength(2),a.Validators.maxLength(100)]),this.currentForm.controls.lastName.setValidators([a.Validators.required,a.Validators.minLength(2),a.Validators.maxLength(100)]),this.currentForm.controls.email.setValidators([a.Validators.required,a.Validators.email]),this.currentForm.controls.password.setValidators([a.Validators.required,a.Validators.minLength(5)]),this.currentForm.controls.passwordConfirm.setValidators([a.Validators.required,p.matchValueValidator("password",this.currentForm)])},f.prototype.gotoLogin=function(){this.authenticationAppService.setAuthTypeLogin()},f.prototype.onSubmit=function(){this.setError(void 0),this.currentForm.valid?this.register():l.validateFormFields(this.currentForm)},f.prototype.isLoading=function(){return this.authenticationAppService.isLoading()},f.prototype.register=function(){this.authenticationAppService.setLoading(!0),this.registerEmail()},f.prototype.registerEmail=function(){var e=this,n={firstName:this.firstName.value,lastName:this.lastName.value,email:this.email.value,password:this.password.value};console.log("AUTHENTICATION DATA: ",n),this.authenticationAdapterService.register(c.AuthenticationAdapterService.TYPE_EMAIL,n).pipe(s.finalize(function(){e.authenticationAppService.setLoading(!1)}),s.flatMap(function(){var t=o.pick(n,["email","password"]);return e.authenticationAdapterService.login(c.AuthenticationAdapterService.TYPE_EMAIL,t)})).subscribe(function(){e.onAuthenticate.emit(!0)},function(t){e.onAuthenticate.emit(!1),e.setError(t),console.log("LOGIN ERROR: ",e.getErrorList())})},f.prototype.setError=function(t){this.error=new h.HttpErrorResponseState(t)},f.prototype.hasError=function(){return!o.isUndefined(this.error)},f.prototype.getError=function(){return this.error},f.prototype.getErrorList=function(){return this.hasError()&&this.getError().getErrorList()},f.prototype.getEmailErrors=function(){return o.get(this.getErrorList(),"email")},f.prototype.isEmailTaken=function(){return o.includes(this.getEmailErrors(),d.EMAIL_EXISTS)},f.prototype.shouldShowCallToAction=function(){return this.showCallToAction},r.__decorate([i.Input(),r.__metadata("design:type",Boolean)],f.prototype,"showCallToAction",void 0),r.__decorate([i.Output(),r.__metadata("design:type",i.EventEmitter)],f.prototype,"onAuthenticate",void 0),f=r.__decorate([i.Component({selector:"app-authentication-register-app",template:n(738),styles:[n(249),n(739)]}),r.__metadata("design:paramtypes",[u.AuthenticationAppService,c.AuthenticationAdapterService,a.FormBuilder])],f));function f(t,e,n){this.authenticationAppService=t,this.authenticationAdapterService=e,this.formBuilder=n,this.showCallToAction=!0,this.onAuthenticate=new i.EventEmitter,this.firstName=new a.FormControl,this.lastName=new a.FormControl,this.email=new a.FormControl,this.password=new a.FormControl,this.passwordConfirm=new a.FormControl,this.initializeForm()}e.AuthenticationRegisterAppComponent=g},737:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FIRSTNAME_REQUIRED="FIRSTNAME_REQUIRED",e.LASTNAME_REQUIRED="LASTNAME_REQUIRED",e.EMAIL_REQUIRED="EMAIL_REQUIRED",e.EMAIL_EXISTS="EMAIL_EXISTS",e.PASSWORD_REQUIRED="PASSWORD_REQUIRED"},738:function(t,e){t.exports='<h3 class="mb-3">Registration</h3>\r\n<ng-template [ngIf]="hasError()">\r\n    <div *ngIf="getError().isErrorMethodNotAllowed()" class="alert alert-danger">\r\n        <span *ngIf="isEmailTaken()">Email is already taken.</span>\r\n        <span *ngIf="!isEmailTaken()">Invalid registration data.</span>\r\n    </div>    \r\n    <div *ngIf="getError().isError5xx()" class="alert alert-danger">\r\n        Service unvailable at the moment. Please try again later.\r\n    </div>    \r\n</ng-template>\r\n<form [formGroup]="currentForm" (ngSubmit)="onSubmit()">\r\n    <app-loading *ngIf="isLoading()" [type]="\'overlay\'" [size]="\'sm\'"></app-loading>\r\n    <div class="form-group">\r\n        <input \r\n            type="text" \r\n            [formControl]="firstName" \r\n            [class.border-danger]="firstName.hasError(\'required\') && firstName.touched"\r\n            class="form-control rounded-0" \r\n            id="firstName" \r\n            name="firstName"\r\n            placeholder="First Name">\r\n            <p *ngIf="firstName.invalid && firstName.touched" class="input-errors">\r\n                <span *ngIf="firstName.hasError(\'required\')">First Name is required</span>\r\n                <span *ngIf="firstName.hasError(\'minlength\') || firstName.hasError(\'maxlength\')">First name should have 2 to 100 characters</span>\r\n            </p>\r\n    </div>\r\n    <div class="form-group">\r\n        <input \r\n            type="text" \r\n            [formControl]="lastName"\r\n            [class.border-danger]="lastName.hasError(\'required\') && lastName.touched"\r\n            class="form-control rounded-0" \r\n            id="lastName" \r\n            name="lastName"\r\n            placeholder="Last Name">\r\n            <p *ngIf="lastName.invalid && lastName.touched" class="input-errors">\r\n                <span *ngIf="lastName.hasError(\'required\')">Last Name is required</span>\r\n                <span *ngIf="lastName.hasError(\'minlength\') || lastName.hasError(\'maxlength\')">Last Name should have 2 to 100 characters</span>\r\n            </p>\r\n    </div>\r\n    <div class="form-group">\r\n        <input \r\n            type="text" \r\n            [formControl]="email" \r\n            [class.border-danger]="(email.hasError(\'required\') || email.hasError(\'email\')) && email.touched"\r\n            class="form-control rounded-0" \r\n            id="email" \r\n            name="email"\r\n            placeholder="Email">\r\n            <p *ngIf="email.invalid && email.touched" class="input-errors">\r\n                <span *ngIf="email.hasError(\'required\')">Email is required</span>\r\n                <span *ngIf="email.hasError(\'email\')">Your Email is invalid</span>\r\n            </p>\r\n    </div>    \r\n    <div class="form-group">\r\n        <input \r\n            type="password" \r\n            [formControl]="password" \r\n            [class.border-danger]="password.hasError(\'required\') && password.touched"\r\n            class="form-control rounded-0" \r\n            id="password" \r\n            name="password"\r\n            placeholder="Password">\r\n            <p *ngIf="password.invalid && password.touched" class="input-errors">\r\n                <span *ngIf="password.hasError(\'required\')">Password is required</span>\r\n                <span *ngIf="password.hasError(\'minlength\')">Password should have minimum of 5 characters</span>\r\n            </p>\r\n    </div>\r\n    <div class="form-group">\r\n        <input \r\n            type="password" \r\n            [formControl]="passwordConfirm" \r\n            [class.border-danger]="(passwordConfirm.hasError(\'required\')) && passwordConfirm.touched"\r\n            class="form-control rounded-0" \r\n            id="passwordConfirm" \r\n            name="passwordConfirm"\r\n            placeholder="Confirm Password">\r\n            <p *ngIf="passwordConfirm.invalid && passwordConfirm.touched" class="input-errors">\r\n                <span *ngIf="passwordConfirm.hasError(\'required\')">Confirm Password is required</span>\r\n                <span *ngIf="passwordConfirm.hasError(\'matchValue\') && !passwordConfirm.hasError(\'required\')">Your Password and Confirmation Password do not match</span>\r\n            </p>\r\n    </div>\r\n    <button type="submit" class="btn btn-app mb-2 w-100 rounded-0" [disabled]="isLoading()">Register</button>\r\n    <ng-template [ngIf]="shouldShowCallToAction()">\r\n    <div class="text-center">\r\n        <span class="mr-2">Existing User?</span> <a [routerLink]="" (click)="gotoLogin()">Login</a>\r\n    </div>\r\n    </ng-template>\r\n</form>'},739:function(t,e,n){var r=n(740);t.exports="string"==typeof r?r:r.toString()},740:function(t,e,n){(e=n(100)(!1)).push([t.i,"",""]),t.exports=e},741:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=n(114),i=n(0),a=n(45),s=(c.prototype.test=function(){},c.prototype.postAuthenticate=function(t){return a.of(void 0)},c=r.__decorate([i.Injectable(),r.__metadata("design:paramtypes",[o.ConnectionFactoryService])],c));function c(t){this.connectionFactoryService=t}e.AuthenticationLoginAppService=s},742:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=n(0),i=n(45),a=(s.prototype.postAuthenticate=function(t){return i.of(void 0)},s=r.__decorate([o.Injectable(),r.__metadata("design:paramtypes",[])],s));function s(){}e.AuthenticationRegisterAppService=a},743:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=n(0),i=n(53),a=n(6),s=n(113),c=n(168),u=n(744),p=n(314),l=d=r.__decorate([o.NgModule({imports:[s.NgbModule,i.FormsModule,a.CommonModule,c.LoadingModule],declarations:[u.TokenInstallerComponent],exports:[u.TokenInstallerComponent],providers:[p.TokenInstallerService]})],d);function d(){}e.TokenInstallerModule=l},744:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=n(0),i=n(113),a=n(143),s=n(314),c=(u.prototype.ngOnDestroy=function(){this.tokenInstallerService.reset()},u.prototype.getFirstName=function(){return this.identityService.getFirstName()},u.prototype.claim=function(){var e=this,t={accountId:this.identityService.getAccountId(),accessCode:"G6fAupi6uB"};this.tokenInstallerService.purchaseAccessCode(t).subscribe(function(t){e.onClaimed.emit(t)})},u.prototype.close=function(){this.modalService.dismissAll()},u.prototype.isInstalling=function(){return this.tokenInstallerService.isInstalling()},u.prototype.hasError=function(){return this.tokenInstallerService.hasError()},u.prototype.getError=function(){return this.tokenInstallerService.getError()},r.__decorate([o.Output(),r.__metadata("design:type",o.EventEmitter)],u.prototype,"onClaimed",void 0),u=r.__decorate([o.Component({selector:"app-token-installer",template:n(746),styles:[n(747)]}),r.__metadata("design:paramtypes",[a.IdentityService,s.TokenInstallerService,i.NgbModal])],u));function u(t,e,n){this.identityService=t,this.tokenInstallerService=e,this.modalService=n,this.onClaimed=new o.EventEmitter}e.TokenInstallerComponent=c},745:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=n(0),i=n(114),a=(s.prototype.purchaseAccessCode=function(t){return this.connectionFactoryService.service("content").setPath("purchase/accesscode").post(void 0,t)},s=r.__decorate([o.Injectable({providedIn:"root"}),r.__metadata("design:paramtypes",[i.ConnectionFactoryService])],s));function s(t){this.connectionFactoryService=t}e.ContentPurchaseAccessCodeModelService=a;function c(){}e.PostPurchaseAccessCode=c},746:function(t,e){t.exports='<div class="d-flex flex-column">\r\n\r\n    <ng-template [ngIf]="hasError()">\r\n        <div class="alert alert-danger m-3">\r\n            Service unvailable at the moment. Please try again later\r\n        </div>\r\n        <div class="text-center pt-2">\r\n            <span (click)="close()"\r\n                class="btn btn-app btn-sm">Close</span>\r\n        </div> \r\n    </ng-template>\r\n\r\n    <ng-template [ngIf]="!hasError()">\r\n        <ng-template [ngIf]="isInstalling()">\r\n            <div class="py-3">\r\n                <app-loading [size]="\'sm\'"\r\n                [text]="\'Loading..\'"></app-loading>\r\n            </div>\r\n        </ng-template>\r\n    \r\n        <ng-template [ngIf]="!isInstalling()">\r\n            <h5 class="pt-2"><i class="fa fa-trophy text-warning"></i> Claim your free tokens now!</h5>\r\n            <p class="mb-2 pt-2">\r\n                Hi {{getFirstName()}}. Thank you for registering on Laddergame. <br />\r\n                Please enjoy your free 5 tokens. Just click the "Claim Now" button below to get your free tokens. Thank you again and enjoy.\r\n            </p>\r\n            <div class="text-center pt-2">\r\n                <span (click)="claim()"\r\n                    class="btn btn-app bg-danger text-white font-weight-bold mx-1">Claim Now!</span>\r\n            </div>    \r\n        </ng-template>    \r\n    </ng-template>\r\n</div>'},747:function(t,e,n){var r=n(748);t.exports="string"==typeof r?r:r.toString()},748:function(t,e,n){(e=n(100)(!1)).push([t.i,"",""]),t.exports=e},749:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=n(0),i=n(315),a=(s.prototype.ngOnInit=function(){this.initialize()},s.prototype.ngOnDestroy=function(){this.tokenListViewerService.reset()},s.prototype.initialize=function(){this.tokenListViewerService.initialize(this.getAccountId()).subscribe(function(){})},s.prototype.getTokens=function(){return this.tokenListViewerService.getTokens()},s.prototype.hasTokens=function(){return this.tokenListViewerService.hasTokens()},s.prototype.isInitialized=function(){return this.tokenListViewerService.isInitialized()},s.prototype.getError=function(){return this.tokenListViewerService.getError()},s.prototype.hasError=function(){return this.tokenListViewerService.hasError()},s.prototype.getAccountId=function(){return this.accountId},s.prototype.shouldShowSelector=function(){return this.showSelector},s.prototype.getName=function(t){return"select-token-"+t.tokenId},s.prototype.select=function(t){this.onSelect.emit(t)},r.__decorate([o.Input(),r.__metadata("design:type",Number)],s.prototype,"accountId",void 0),r.__decorate([o.Input(),r.__metadata("design:type",Boolean)],s.prototype,"showSelector",void 0),r.__decorate([o.Output(),r.__metadata("design:type",o.EventEmitter)],s.prototype,"onSelect",void 0),s=r.__decorate([o.Component({selector:"app-token-list-viewer",template:n(750),styles:[n(751)]}),r.__metadata("design:paramtypes",[i.TokenListViewerService])],s));function s(t){this.tokenListViewerService=t,this.showSelector=!1,this.onSelect=new o.EventEmitter}e.TokenListViewerComponent=a},750:function(t,e){t.exports='<div>\r\n    <ng-template [ngIf]="!isInitialized()">\r\n        <app-loading \r\n            [type]="\'simple\'" \r\n            [size]="\'sm\'"\r\n            [text]="\'Loading token list..\'"\r\n            ></app-loading>\r\n    </ng-template>\r\n\r\n    <ng-template [ngIf]="hasError()">\r\n        <ng-template [ngIf]="getError().isErrorNotFound()">\r\n            <div class="text-center py-4">You have no tokens available.</div>\r\n        </ng-template>\r\n        <ng-template [ngIf]="getError().isError5xx()">\r\n            <div class="text-center py-4">Service unvailable at the moment. Please try again later.</div>\r\n        </ng-template>\r\n    </ng-template>\r\n    <ng-template [ngIf]="isInitialized() && hasTokens()">\r\n        <ul class="list-group list-group-flush">\r\n            <ng-container *ngFor="let token of getTokens()">\r\n                <li class="list-group-item d-flex justify-content-between align-items-center pr-0 pl-2">\r\n                    <span class="mr-auto">{{token?.productName}}</span>\r\n                    <span class="mr-2 bg-danger text-white rounded token-count">\r\n                        <i class="fas fa-coins text-warning mr-1"></i>\r\n                        <span class="font-weight-bold">{{token?.quantity - token?.used}}</span>\r\n                    </span>\r\n                    <div *ngIf="shouldShowSelector()" class="custom-control custom-radio">\r\n                        <input type="radio" [attr.id]="getName(token)" class="custom-control-input">\r\n                        <label (click)="select(token)" class="custom-control-label" [attr.for]="getName(token)">&nbsp;</label>\r\n                    </div>\r\n                </li>   \r\n            </ng-container>\r\n         </ul>     \r\n    </ng-template>\r\n</div>'},751:function(t,e,n){var r=n(752);t.exports="string"==typeof r?r:r.toString()},752:function(t,e,n){(e=n(100)(!1)).push([t.i,".token-count{padding:.1em .3em}.custom-control-label{cursor:pointer}",""]),t.exports=e},753:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=n(0),i=n(101),a=n(113),s=n(253),c=n(213),u=n(256),p=n(143),l=n(160),d=(h.prototype.ngOnInit=function(){this.initialize(),this.initializeSubscribers()},h.prototype.ngOnDestroy=function(){},h.prototype.initialize=function(){},h.prototype.initializeIdentityCalls=function(){this.identityService.hasIdentity()&&this.initializeTokens()},h.prototype.initializeTokens=function(){var t={accountId:this.getAccountId()};this.contentTokenStateService.initializeTokenListHistoryCount(t).subscribe(function(t){})},h.prototype.initializeSubscribers=function(){var e=this;this.identityService.getObservable(p.IdentityService.EVENT_IDENTITY_UPDATE).subscribe(function(t){e.initializeIdentityCalls()})},h.prototype.hasToken=function(){return this.contentTokenStateService.hasToken()},h.prototype.getTotalRemainingTokens=function(){return this.contentTokenStateService.getTotalRemainingTokens()},h.prototype.hasIdentity=function(){return this.identityService.hasIdentity()},h.prototype.isInitialized=function(){return this.identityService.isInitialized()},h.prototype.getFirstName=function(){return this.identityService.getFirstName()},h.prototype.getAccountId=function(){return this.identityService.getAccountId()},h.prototype.isTokenListHistoryCountInitialized=function(){return this.contentTokenStateService.isTokenListHistoryCountInitialized()},h.prototype.toggle=function(){this.navCanvasOpen=!this.navCanvasOpen},h.prototype.isNavCanvasOpen=function(){return this.navCanvasOpen},h.prototype.navigateToPlayList=function(){this.identityService.isAnonymous()?this.openRegister():this.router.navigate(["/play/list"])},h.prototype.navigateToPurchase=function(){this.identityService.isAnonymous()?this.openRegister():this.router.navigate(["/purchase"])},h.prototype.setAuthType=function(t){this.authType=t},h.prototype.getAuthType=function(){return this.authType},h.prototype.isAuthTypeRegister=function(){return this.getAuthType()==l.AuthenticationAppService.AUTH_TYPE_REGISTER},h.prototype.openLogin=function(){this.setAuthType(l.AuthenticationAppService.AUTH_TYPE_LOGIN),this.openAuthenticationApp()},h.prototype.openRegister=function(){this.setAuthType(l.AuthenticationAppService.AUTH_TYPE_REGISTER),this.openAuthenticationApp()},h.prototype.openAuthenticationApp=function(){this.authenticationModalRef=this.modalService.open(this.authenticationAppContent)},h.prototype.openClaimToken=function(){this.claimTokenModalRef=this.modalService.open(this.claimTokenContent,{centered:!0})},h.prototype.openTokenListViewer=function(){this.tokenListViewerModalRef=this.modalService.open(this.tokenListViewerContent,{centered:!0})},h.prototype.onClaimed=function(){this.initializeTokens(),this.closeClaimTokenModal()},h.prototype.closeAuthenticationModal=function(){this.authenticationModalRef&&this.authenticationModalRef.close()},h.prototype.closeClaimTokenModal=function(){this.claimTokenModalRef&&this.claimTokenModalRef.close()},h.prototype.closeTokenListViewerModal=function(){this.tokenListViewerModalRef&&this.tokenListViewerModalRef.close()},h.prototype.logout=function(){this.identityService.logout().subscribe(function(t){console.log("Logout success",t)})},h.prototype.onAuthenticate=function(t){console.log("AUTHENTICATED",t),this.identityService.deleteCache(),this.contentRungModelService.deleteCache(),this.contentPurchaseTokenModelService.deleteCache(),t&&(this.authenticationAppService.isAuthTypeRegister()&&this.openClaimToken(),this.closeAuthenticationModal(),this.identityService.initialize().subscribe(),this.router.navigate(["/play/list"]))},r.__decorate([o.ViewChild("authenticationAppContent",{static:!1}),r.__metadata("design:type",a.NgbModal)],h.prototype,"authenticationAppContent",void 0),r.__decorate([o.ViewChild("claimTokenContent",{static:!1}),r.__metadata("design:type",a.NgbModal)],h.prototype,"claimTokenContent",void 0),r.__decorate([o.ViewChild("tokenListViewerContent",{static:!1}),r.__metadata("design:type",a.NgbModal)],h.prototype,"tokenListViewerContent",void 0),h=r.__decorate([o.Component({selector:"app-header-navigation-view",template:n(754),styles:[n(755)]}),r.__metadata("design:paramtypes",[a.NgbModal,p.IdentityService,s.ContentRungModelService,u.ContentPurchaseTokenModelService,c.ContentTokenStateService,l.AuthenticationAppService,i.ActivatedRoute,i.Router])],h));function h(t,e,n,r,o,i,a,s){this.modalService=t,this.identityService=e,this.contentRungModelService=n,this.contentPurchaseTokenModelService=r,this.contentTokenStateService=o,this.authenticationAppService=i,this.route=a,this.router=s,this.navCanvasOpen=!1,this.authType=l.AuthenticationAppService.AUTH_TYPE_LOGIN}e.HeaderNavigationViewComponent=d},754:function(t,e){t.exports='<nav class="navbar navbar-expand-lg bg-white py-0 px-2 fixed-top shadow-sm">\r\n    <span class="navbar-brand mr-2" routerLink="/">\r\n        \x3c!-- <i class="fas fa-border-none"></i> --\x3e\r\n        LadderGame\r\n    </span>\r\n    <span (click)="toggle()" class="navbar-toggler p-0 border-0">\r\n        <span class="fas fa-bars"></span>\r\n    </span>\r\n    <div\r\n        class="navbar-collapse offcanvas-collapse"\r\n        [class.open]="isNavCanvasOpen()"\r\n    >\r\n        <ul class="navbar-nav mr-auto">\r\n            <ng-template> </ng-template>\r\n            \x3c!--             <li class="nav-item">\r\n                <span\r\n                    (click)="navigateToPlayList()"\r\n                    class="nav-link"\r\n                    routerLinkActive="active"\r\n                >\r\n                    <i class="far fa-play-circle mr-1"></i>\r\n                    <span>Play</span>\r\n                </span>\r\n            </li> --\x3e\r\n            <li class="nav-item">\r\n                <span\r\n                    class="nav-link"\r\n                    routerLink="/play"\r\n                    routerLinkActive="active"\r\n                >\r\n                    <i class="far fa-play-circle mr-1"></i>\r\n                    <span>Play</span>\r\n                </span>\r\n            </li>\r\n            <li class="nav-item">\r\n                <span\r\n                    class="nav-link"\r\n                    routerLink="/about"\r\n                    routerLinkActive="active"\r\n                >\r\n                    <i class="far fa-question-circle mr-2"></i>\r\n                    <span>How to play</span>\r\n                </span>\r\n            </li>\r\n            \x3c!-- <ng-template [ngIf]="isInitialized() && hasIdentity()">\r\n            <li class="nav-item">\r\n                <span class="nav-link" routerLink="/setup" routerLinkActive="active">\r\n                    <i class="fas fa-plus mr-2"></i>\r\n                    <span>New Game</span>\r\n                </span>\r\n            </li>\r\n            </ng-template>\r\n            <li class="nav-item">\r\n                <span class="nav-link" routerLink="/about" routerLinkActive="active">\r\n                    <i class="far fa-question-circle mr-2"></i>\r\n                    <span>How to play</span>\r\n                </span>\r\n            </li>\r\n            <ng-template [ngIf]="isInitialized() && hasIdentity()">\r\n            <li class="nav-item">\r\n                <span class="nav-link" routerLink="/friends" routerLinkActive="active">\r\n                    <i class="fas fa-user-friends mr-2"></i>\r\n                    <span>Friends</span>\r\n                </span>\r\n            </li>\r\n            </ng-template>\r\n            <li class="nav-item">\r\n                <span\r\n                    (click)="navigateToPurchase()"\r\n                    class="nav-link"\r\n                    routerLinkActive="active"\r\n                >\r\n                    <i class="fas fa-shopping-cart mr-2"></i>\r\n                    <span>Buy Token</span>\r\n                </span>\r\n            </li>\r\n            <ng-template\r\n                [ngIf]="\r\n                    isInitialized() &&\r\n                    hasIdentity() &&\r\n                    !hasToken() &&\r\n                    isTokenListHistoryCountInitialized()\r\n                "\r\n            >\r\n                <li class="nav-item d-flex align-items-center">\r\n                    <span\r\n                        (click)="openClaimToken()"\r\n                        class="claim-link rounded px-2 py-1 bg-danger"\r\n                        routerLinkActive="active"\r\n                    >\r\n                        <i class="fa fa-trophy mr-2 text-warning"></i>\r\n                        <span>Free Tokens!</span>\r\n                    </span>\r\n                </li>\r\n            </ng-template>\r\n            --\x3e\r\n        </ul>\r\n        <ng-template [ngIf]="isInitialized() && !hasIdentity()">\r\n            \x3c!--             <span\r\n                routerLink=""\r\n                (click)="openLogin()"\r\n                class="text-dark auth-link cursor-pointer my-2 my-sm-0 mr-2"\r\n                >Login</span\r\n            > --\x3e\r\n        </ng-template>\r\n\r\n        <ng-template [ngIf]="isInitialized() && hasIdentity()">\r\n            <span\r\n                (click)="openTokenListViewer()"\r\n                class="mr-2 bg-danger text-white rounded token-count"\r\n            >\r\n                <i class="fas fa-coins text-warning mr-1"></i>\r\n                <span class="font-weight-bold">{{\r\n                    getTotalRemainingTokens()\r\n                }}</span>\r\n            </span>\r\n            <span\r\n                routerLink="/account"\r\n                class="text-dark auth-link cursor-pointer my-2 my-sm-0 mr-2"\r\n            >\r\n                <i class="fas fa-user mr-2"></i\r\n                ><span>{{ getFirstName() }}</span>\r\n            </span>\r\n            <span\r\n                routerLink=""\r\n                (click)="logout()"\r\n                class="text-dark auth-link my-2 my-sm-0 mr-2"\r\n            >\r\n                <i class="fas fa-power-off mr-2"></i>\r\n                <span>Logout</span>\r\n            </span>\r\n        </ng-template>\r\n    </div>\r\n</nav>\r\n\r\n<ng-template #authenticationAppContent let-modal>\r\n    <div class="modal-header border-0 p-1 pr-2">\r\n        <span\r\n            type="button"\r\n            class="close"\r\n            aria-label="Close"\r\n            (click)="modal.dismiss(\'Cross click\')"\r\n        >\r\n            <span aria-hidden="true">&times;</span>\r\n        </span>\r\n    </div>\r\n    <div class="modal-body pt-0 pb-3 px-4">\r\n        <app-authentication-app\r\n            [authType]="getAuthType()"\r\n            (onAuthenticate)="onAuthenticate($event)"\r\n        ></app-authentication-app>\r\n    </div>\r\n</ng-template>\r\n\r\n<ng-template #claimTokenContent>\r\n    <div class="modal-body">\r\n        <app-token-installer\r\n            (onClaimed)="onClaimed($event)"\r\n        ></app-token-installer>\r\n    </div>\r\n</ng-template>\r\n\r\n<ng-template #tokenListViewerContent>\r\n    <div class="modal-header py-2 border-0 token-list-viewer-header">\r\n        <h5 class="mb-0 py-0">Token list</h5>\r\n    </div>\r\n    <div class="modal-body px-1">\r\n        <app-token-list-viewer\r\n            [accountId]="getAccountId()"\r\n        ></app-token-list-viewer>\r\n    </div>\r\n</ng-template>\r\n'},755:function(t,e,n){var r=n(756);t.exports="string"==typeof r?r:r.toString()},756:function(t,e,n){(e=n(100)(!1)).push([t.i,".navbar-brand{cursor:pointer;outline:none}.nav-link,.auth-link{cursor:pointer;outline:0}.claim-link{box-shadow:0 0 1px 1px rgba(20,23,28,.1),0 3px 1px 0 rgba(20,23,28,.1);cursor:pointer;color:#fff;font-weight:bold}.dropdown-menu{min-width:0 !important}.dropdown-item{cursor:pointer}.active{background-color:#e2e6ea}.nav-item .btn{outline:none}.token-count{box-shadow:0 0 1px 1px rgba(20,23,28,.1),0 3px 1px 0 rgba(20,23,28,.1);cursor:pointer;padding:.1em .3em}.token-list-viewer-header{box-shadow:0 0 1px 1px rgba(20,23,28,.1),0 3px 1px 0 rgba(20,23,28,.1)}",""]),t.exports=e},757:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.environment={production:!1}}},[[706,3,2,16,20,9,18,12,14,15,19,21]]]);